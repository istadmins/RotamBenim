<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotam Benim - Basit Login Test</title>
    
    <!-- Tabler CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta17/dist/css/tabler.min.css">
    
    <!-- Awesomplete CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tabler Autocomplete JS -->
    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta20/dist/js/tabler.min.js"></script>
    
    <!-- Awesomplete JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>
    
    <style>
        :root {
            --card-opacity: 0.50;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .bg-overlay {
            position: fixed;
            z-index: 0;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            opacity: 0.5;
            background-size: cover;
            background-position: center;
            transition: opacity 0.5s;
        }
        
        .login-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .login-card {
            background: rgba(255,255,255,var(--card-opacity)) !important;
            border-radius: 16px;
            padding: 32px;
            max-width: 1200px;
            width: 100%;
            text-align: center;
        }
        
        .login-logo {
            font-size: 2rem;
            font-weight: 700;
            color: #206bc4;
            margin-bottom: 10px;
        }
        
        .login-subtitle {
            color: #626976;
            margin-bottom: 30px;
        }
        
        .google-btn {
            background: #4285f4;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .google-btn:hover {
            background: #3367d6;
            transform: translateY(-2px);
        }
        
        .google-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .user-info {
            background: transparent !important;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
        }
        
        .status-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .status-success {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-info {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .logout-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .logout-btn:hover {
            background: #c82333;
        }
        
        .table-responsive {
            width: 100%;
            overflow-x: auto;
            margin-top: 30px;
        }
        .table {
            width: 100%;
            min-width: 900px;
            font-size: 14px;
            background: white;
            border-radius: 8px;
            border-collapse: separate;
            border-spacing: 0;
        }
        .table th, .table td {
            padding: 16px 14px;
            white-space: nowrap;
            vertical-align: top;
            min-height: 32px;
            line-height: 1.6;
            text-align: left;
        }
        .table td:last-child {
            text-align: center;
        }
        .table th {
            background: #f1f3f9;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        .table tr:nth-child(even) {
            background: #f8f9fa;
        }
        .table td {
            max-width: 180px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .table td.description {
            max-width: 350px;
            white-space: normal;
            word-break: break-word;
        }
        .country-group-row {
            background: rgba(255,255,255,var(--card-opacity)) !important;
            font-weight: bold;
            font-size: 16px;
            text-align: left;
        }
        #filters { 
            position: relative;
        }
        #suggestions {
            position: absolute;
            left: 0;
            top: 100%;
            width: 350px;
            z-index: 9999;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 6px;
            min-height: 0;
        }
        .awesomplete {
            z-index: 99999 !important;
            position: relative;
        }
        .awesomplete > ul {
            z-index: 99999 !important;
            position: absolute;
        }
        .login-card, #filters {
            overflow: visible !important;
        }
        .table td.name {
            white-space: normal !important;
            word-break: break-word;
        }
    </style>
</head>
<body>
    <div class="bg-overlay" style="position:fixed;z-index:0;top:0;left:0;width:100vw;height:100vh;pointer-events:none;opacity:0.35;background-size:cover;background-position:center;transition:opacity 0.5s;"></div>
    <div class="login-container">
        <div class="login-card">
            <div class="login-logo">üåç Rotam Benim</div>
            
            <!-- Login Button -->
            <button id="googleSignInBtn" class="google-btn">
                <svg width="20" height="20" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Google ile Giri≈ü Yap
            </button>
            
            <!-- User Info (hidden by default) -->
            <div id="userInfo" class="user-info" style="display: none;">
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <img id="userAvatar" class="user-avatar" src="" alt="User Avatar">
                    <div>
                        <div id="userName" style="font-weight: 600; font-size: 16px;"></div>
                        <div id="userEmail" style="color: #626976; font-size: 14px;"></div>
                    </div>
                </div>
                <button id="logoutBtn" class="logout-btn">√áƒ±kƒ±≈ü Yap</button>
            </div>
            
            <!-- Status Messages -->
            <div id="statusMessage"></div>
            
            <!-- Filtreler -->
            <div id="filters" style="display: flex; gap: 16px; justify-content: flex-start; align-items: center; margin-bottom: 18px; margin-top: 18px; position: relative;">
              <select id="countryFilter" style="min-width: 140px; padding: 6px 10px; border-radius: 6px; border: 1px solid #ccc;"></select>
              <label for="visitedFilter">Ziyaret:</label>
              <select id="visitedFilter" style="min-width: 120px; padding: 6px 10px; border-radius: 6px; border: 1px solid #ccc;">
                <option value="all">T√ºm√º</option>
                <option value="visited">Gezildi</option>
                <option value="notvisited" selected>Gezilmedi</option>
              </select>
              <input id="searchBox" class="form-control awesomplete" type="text" placeholder="Yeni yer adƒ±..." style="min-width: 180px; padding: 6px 10px; border-radius: 6px; border: 1px solid #ccc;" autocomplete="off" />
              <button id="addPlaceBtn" style="padding: 6px 18px; border-radius: 6px; border: none; background: #206bc4; color: white; font-weight: 500; cursor: pointer;">Ekle</button>
              
              <input id="locationSuggestionBox" type="text" placeholder="≈ûehir veya √ºlke adƒ±..." style="min-width: 180px; padding: 6px 10px; border-radius: 6px; border: 1px solid #ccc; margin-left: 15px;" autocomplete="off" list="locationSuggestions" />
              <datalist id="locationSuggestions">
                <!-- Dinamik √∂neriler buraya eklenecek -->
              </datalist>
              <button id="addLocationBtn" style="padding: 6px 18px; border-radius: 6px; border: none; background: #28a745; color: white; font-weight: 500; cursor: pointer;">Turistik Yerleri Ekle</button>
            </div>
            
            <!-- Gezilecek Yerler Tablosu -->
            <div id="placesTableWrapper" class="table-responsive">
              <div id="placesTableContainer" style="margin-top: 0; display: none;">
                <div style="margin-bottom: 15px; text-align: center;">
                  <button id="createRouteBtn" style="padding: 8px 20px; border-radius: 6px; border: none; background: #28a745; color: white; font-weight: 500; cursor: pointer; font-size: 14px;">üó∫Ô∏è Se√ßili Yerler ƒ∞√ßin Rota Olu≈ütur</button>
                </div>
                <table id="placesTable" class="table table-sm">
                  <thead>
                    <tr>
                      <th>Yer Adƒ±</th>
                      <th>≈ûehir</th>
                      <th>Kategori</th>
                      <th>A√ßƒ±klama</th>
                      <th>Ziyaret Edildi mi?</th>
                      <th>Rota ƒ∞√ßin Se√ß</th>
                      <th>Google Maps</th>
                      <th>Sil</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Satƒ±rlar buraya eklenecek -->
                  </tbody>
                </table>
              </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";
        import { getFirestore, collection, getDocs, addDoc, query, where } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB6bIJOkooeRSKWtb09zdNmMIjHDbXCzYA",
            authDomain: "rotambenim.firebaseapp.com",
            projectId: "rotambenim",
            storageBucket: "rotambenim.firebasestorage.app",
            messagingSenderId: "374285362920",
            appId: "1:374285362920:web:b4058cf4a93e7337168b5d",
            measurementId: "G-0QVZ4LDYPJ"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        // DOM elements
        const googleSignInBtn = document.getElementById('googleSignInBtn');
        const userInfo = document.getElementById('userInfo');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const userEmail = document.getElementById('userEmail');
        const logoutBtn = document.getElementById('logoutBtn');
        const statusMessage = document.getElementById('statusMessage');
        const placesTableContainer = document.getElementById('placesTableContainer');
        const placesTableBody = document.querySelector('#placesTable tbody');
        const addPlaceBtn = document.getElementById('addPlaceBtn');
        const searchBox = document.getElementById('searchBox');
        let suggestionResults = [];
        const GEONAMES_USERNAME = "b.alacam";

        // √úlke isimleri mapping (tr/en)
        const countryNames = {
          'turkey': { tr: 'T√úRKƒ∞YE', en: 'TURKEY' },
          'germany': { tr: 'ALMANYA', en: 'GERMANY' },
          'france': { tr: 'FRANSA', en: 'FRANCE' },
          'italy': { tr: 'ƒ∞TALYA', en: 'ITALY' },
          'spain': { tr: 'ƒ∞SPANYA', en: 'SPAIN' },
          'greece': { tr: 'YUNANƒ∞STAN', en: 'GREECE' },
          'netherlands': { tr: 'HOLLANDA', en: 'NETHERLANDS' },
          'belgium': { tr: 'BEL√áƒ∞KA', en: 'BELGIUM' },
          'austria': { tr: 'AVUSTURYA', en: 'AUSTRIA' },
          'switzerland': { tr: 'ƒ∞SVƒ∞√áRE', en: 'SWITZERLAND' },
          'portugal': { tr: 'PORTEKƒ∞Z', en: 'PORTUGAL' },
          'czech republic': { tr: '√áEK CUMHURƒ∞YETƒ∞', en: 'CZECH REPUBLIC' },
          'poland': { tr: 'POLONYA', en: 'POLAND' },
          'romania': { tr: 'ROMANYA', en: 'ROMANIA' },
          'bulgaria': { tr: 'BULGARƒ∞STAN', en: 'BULGARIA' },
          'latvia': { tr: 'LETONYA', en: 'LATVIA' },
          'lithuania': { tr: 'Lƒ∞TVANYA', en: 'LITHUANIA' },
          'estonia': { tr: 'ESTONYA', en: 'ESTONIA' },
          'hungary': { tr: 'MACARƒ∞STAN', en: 'HUNGARY' },
          'slovakia': { tr: 'SLOVAKYA', en: 'SLOVAKIA' },
          'slovenia': { tr: 'SLOVENYA', en: 'SLOVENIA' },
          'croatia': { tr: 'HIRVATƒ∞STAN', en: 'CROATIA' },
          'serbia': { tr: 'SIRBƒ∞STAN', en: 'SERBIA' },
          'ukraine': { tr: 'UKRAYNA', en: 'UKRAINE' },
          'norway': { tr: 'NORVE√á', en: 'NORWAY' },
          'sweden': { tr: 'ƒ∞SVE√á', en: 'SWEDEN' },
          'finland': { tr: 'Fƒ∞NLANDƒ∞YA', en: 'FINLAND' },
          'south korea': { tr: 'G√úNEY KORE', en: 'SOUTH KOREA' },
          'japan': { tr: 'JAPONYA', en: 'JAPAN' },
          'china': { tr: '√áƒ∞N', en: 'CHINA' },
          'usa': { tr: 'AMERƒ∞KA', en: 'USA' },
          'uk': { tr: 'Bƒ∞RLE≈ûƒ∞K KRALLIK', en: 'UK' },
          // Diƒüer √ºlkeler eklenebilir
        };
        const currentLang = 'tr'; // ƒ∞leride 'en' yapƒ±labilir

        // Show status message
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('statusMessage');
            if (!statusDiv) return;
            
            // Mesaj tipine g√∂re stil belirle
            let bgColor, textColor;
            switch(type) {
                case 'success':
                    bgColor = '#d4edda';
                    textColor = '#155724';
                    break;
                case 'error':
                    bgColor = '#f8d7da';
                    textColor = '#721c24';
                    break;
                case 'info':
                default:
                    bgColor = '#d1ecf1';
                    textColor = '#0c5460';
                    break;
            }
            
            statusDiv.innerHTML = `
                <div style="
                    background-color: ${bgColor};
                    color: ${textColor};
                    padding: 10px 15px;
                    border-radius: 5px;
                    margin: 10px 0;
                    border: 1px solid ${textColor}20;
                    font-size: 14px;
                ">
                    ${message}
                </div>
            `;
            
            // 5 saniye sonra mesajƒ± temizle
            setTimeout(() => {
                if (statusDiv) {
                    statusDiv.innerHTML = '';
                }
            }, 5000);
        }

        // Handle Google Sign In
        async function handleGoogleSignIn() {
            try {
                googleSignInBtn.disabled = true;
                showStatus('Google ile giri≈ü yapƒ±lƒ±yor...', 'info');
                
                const provider = new GoogleAuthProvider();
                const result = await signInWithPopup(auth, provider);
                
                console.log('Giri≈ü ba≈üarƒ±lƒ±:', result.user);
                showStatus('Giri≈ü ba≈üarƒ±lƒ±!', 'success');
                
            } catch (error) {
                console.error('Giri≈ü hatasƒ±:', error);
                
                let errorMessage = 'Giri≈ü yapƒ±lƒ±rken bir hata olu≈ütu.';
                if (error.code === 'auth/popup-closed-by-user') {
                    errorMessage = 'Giri≈ü iptal edildi.';
                } else if (error.code === 'auth/network-request-failed') {
                    errorMessage = 'Aƒü hatasƒ±. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin.';
                } else if (error.code === 'auth/unauthorized-domain') {
                    errorMessage = 'Bu domain i√ßin giri≈ü yetkisi yok. Firebase Console\'da domain\'i ekleyin.';
                }
                
                showStatus(errorMessage, 'error');
                googleSignInBtn.disabled = false;
            }
        }

        // Handle Sign Out
        async function handleSignOut() {
            try {
                await signOut(auth);
                console.log('√áƒ±kƒ±≈ü ba≈üarƒ±lƒ±');
                showStatus('√áƒ±kƒ±≈ü yapƒ±ldƒ±.', 'success');
            } catch (error) {
                console.error('√áƒ±kƒ±≈ü hatasƒ±:', error);
                showStatus('√áƒ±kƒ±≈ü yapƒ±lƒ±rken hata olu≈ütu.', 'error');
            }
        }

        // Update UI based on auth state
        function updateUI(user) {
            if (user) {
                // User is signed in
                googleSignInBtn.style.display = 'none';
                userInfo.style.display = 'block';
                
                userName.textContent = user.displayName || 'Kullanƒ±cƒ±';
                userEmail.textContent = user.email || '';
                
                if (user.photoURL) {
                    userAvatar.src = user.photoURL;
                } else {
                    userAvatar.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjUiIGN5PSIyNSIgcj0iMjUiIGZpbGw9IiM2MjY5NzYiLz4KPHN2ZyB4PSIxMiIgeT0iMTIiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xMiAxMmMyLjIxIDAgNC0xLjc5IDQtNHMtMS43OS00LTQtNC00IDEuNzktNCA0IDEuNzkgNCA0IDR6bTAgMmMtMi42NyAwLTggMS4zNC04IDR2MmgxNnYtMmMwLTIuNjYtNS4zMy00LTgtNHoiLz4KPC9zdmc+Cjwvc3ZnPgo=';
                }
                
            } else {
                // User is signed out
                googleSignInBtn.style.display = 'flex';
                userInfo.style.display = 'none';
                googleSignInBtn.disabled = false;
            }
        }

        // Auth state listener
        onAuthStateChanged(auth, async (user) => {
            console.log('Auth state changed:', user ? 'User signed in' : 'User signed out');
            updateUI(user);
            
            if (user) {
                // T√ºm pop√ºler yerleri ve √ºlkeleri topla
                const allPopularPlaces = await getAllPopularPlaces();
                const allCountryCodes = await getAllPopularCountryCodes();
                // Kullanƒ±cƒ±nƒ±n mevcut yerlerini √ßek
                const userPlacesRef = collection(db, `users/${user.uid}/places`);
                const snapshot = await getDocs(userPlacesRef);
                const existingPlaces = new Map();
                snapshot.forEach(doc => {
                    const d = doc.data();
                    const key = `${(d.country || '').toUpperCase()}|||${(d.name || '').trim()}`;
                    existingPlaces.set(key, { ...d, docId: doc.id });
                });
                // Eksik pop√ºler yerleri ekle
                let addedCount = 0;
                for (const p of allPopularPlaces) {
                    const country = (p.country_tr || p.country_en || '').toUpperCase();
                    const name = p.name_tr;
                    const key = `${country}|||${name}`;
                    if (!existingPlaces.has(key)) {
                        await addDoc(userPlacesRef, filterUndefinedFields({
                            name: p.name_tr,
                            city: p.city_tr,
                            country: p.country_tr ? p.country_tr.toUpperCase() : undefined,
                            category: p.category_tr,
                            description: p.description_tr,
                            visited: false,
                            name_en: p.name_en,
                            city_en: p.city_en,
                            country_en: p.country_en ? p.country_en.toUpperCase() : undefined,
                            category_en: p.category_en,
                            description_en: p.description_en
                        }));
                        addedCount++;
                    } else {
                        // A√ßƒ±klama eksikse g√ºncelle
                        const place = existingPlaces.get(key);
                        if (!place.description || place.description.trim() === '') {
                            const { doc, updateDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
                            const docRef = doc(db, `users/${user.uid}/places`, place.docId);
                            await updateDoc(docRef, filterUndefinedFields({
                                description: p.description_tr,
                                name_en: p.name_en,
                                city_en: p.city_en,
                                country_en: p.country_en ? p.country_en.toUpperCase() : undefined,
                                category_en: p.category_en,
                                description_en: p.description_en
                            }));
                        }
                    }
                }
                if (addedCount > 0) showStatus(`${addedCount} yeni pop√ºler yer otomatik eklendi!`, 'success');
                else showStatus('T√ºm pop√ºler yerler zaten mevcut.', 'info');
                // √úlke dropdown'ƒ±nƒ± g√ºncelle
                await updateCountryDropdown(user, allCountryCodes);
            }
            
            loadPlacesTable(user);
        });

        // Event listeners
        googleSignInBtn.addEventListener('click', handleGoogleSignIn);
        logoutBtn.addEventListener('click', handleSignOut);
        
        // Awesomplete ile √∂neri getir
        const awesomplete = new Awesomplete(searchBox, {
          minChars: 2,
          maxItems: 10,
          autoFirst: true,
          list: [],
          item: function(suggestion, input) {
            // A√ßƒ±klama ba≈ülƒ±ƒüƒ±n altƒ±nda deƒüil, ba≈ülƒ±ƒüƒ±n hemen √ºst√ºnde olacak ≈üekilde d√ºzenle
            const html = `<div style='display:flex;flex-direction:column;'>
              <span style='font-size:12px;color:#888;margin-bottom:2px;'>${suggestion.description || ''}</span>
              <strong>${suggestion.label}</strong>
            </div>`;
            const li = document.createElement('li');
            li.innerHTML = html;
            return li;
          },
          replace: function(suggestion) {
            this.input.value = suggestion.label;
          }
        });
        let lastSuggestions = [];
        searchBox.addEventListener('input', async () => {
          const query = searchBox.value.trim();
          if (!query) {
            awesomplete.list = [];
            lastSuggestions = [];
            return;
          }
          // Wikipedia'dan √ßek
          let wikiResults = [];
  try {
            const url = `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)}+tourism+attraction+place&format=json&origin=*`;
            const resp = await fetch(url);
            const data = await resp.json();
            if (data.query && data.query.search) {
              // Sƒ±kƒ± filtre: sadece gezilecek yer anahtar kelimeleriyle filtrele
              const touristKeywords = [
                "city", "town", "village", "park", "mountain", "lake", "museum", "site", "ruins", "castle", "beach", "island", "national park", "tourist attraction", "region", "province", "district", "valley", "canyon", "bay", "forest", "archaeological", "ancient", "historic", "landmark", "monument", "temple", "cathedral", "mosque", "church", "palace", "bazaar", "market", "bridge", "tower", "garden", "zoo", "aquarium", "harbor", "square", "plaza", "waterfall", "thermal", "spa", "resort", "cave", "gorge", "cliff", "fortress", "citadel", "basilica", "synagogue", "pagoda", "shrine", "observatory", "amphitheater", "arena", "stadium", "theater", "opera", "gallery", "exhibition", "statue", "sculpture", "fountain", "lighthouse", "botanical", "safari", "viewpoint", "panorama", "vista", "lookout", "observation", "peak", "summit"
              ];
              
              // Ki≈üi isimlerini ve yazarlarƒ± filtrelemek i√ßin negatif anahtar kelimeler
              const negativeKeywords = [
                "author", "writer", "novelist", "poet", "politician", "actor", "actress", "director", "producer", "singer", "musician", "composer", "artist", "painter", "sculptor", "philosopher", "scientist", "inventor", "entrepreneur", "businessman", "businesswoman", "athlete", "player", "born", "died", "biography"
              ];
              
              wikiResults = data.query.search.filter(item => {
                const text = (item.title + ' ' + item.snippet).toLowerCase();
                
                // Turistik yer anahtar kelimelerinden en az birini i√ßermeli
                const hasTouristKeyword = touristKeywords.some(kw => text.includes(kw));
                
                // Negatif anahtar kelimelerden hi√ßbirini i√ßermemeli
                const hasNegativeKeyword = negativeKeywords.some(kw => text.includes(kw));
                
                // Turistik yer anahtar kelimesi i√ßermeli VE negatif anahtar kelime i√ßermemeli
                return hasTouristKeyword && !hasNegativeKeyword;
              }).map(item => ({
                label: item.title,
                value: item.title,
                description: item.snippet.replace(/<[^>]+>/g, ''),
                source: 'wikipedia'
              }));
            }
          } catch {}
          // Geonames'den √ßek
          let geoResults = [];
          try {
            // Turistik yerler i√ßin feature code filtresi ekle
            // A (√ºlke, eyalet, b√∂lge), P (≈üehir, k√∂y), L (parklar, alanlar), S (spot, bina, √ßiftlik), T (daƒü, tepe, kaya), H (su k√ºtlesi), V (orman, heath)
            const featureCodes = 'A.ADM1,A.ADM2,A.ADM3,P.PPL,P.PPLA,P.PPLC,L.PRK,L.LCTY,S.BLDG,S.HSE,S.HTL,S.MNMT,S.MSTY,S.OPRA,S.SQR,T.MT,T.HLL,T.VLC,H.LK,H.STM,H.SPNG,H.WTRF,V.FRST';
            const geoUrl = `https://secure.geonames.org/searchJSON?q=${encodeURIComponent(query)}&featureCode=${featureCodes}&maxRows=10&username=${GEONAMES_USERNAME}`;
            const geoResp = await fetch(geoUrl);
            const geoData = await geoResp.json();
            if (geoData.geonames) {
              // Ki≈üi isimlerini filtrelemek i√ßin negatif anahtar kelimeler
              const negativeKeywords = [
                "author", "writer", "novelist", "poet", "politician", "actor", "actress", "director", "producer", "singer", "musician", "composer", "artist", "painter", "sculptor", "philosopher", "scientist", "inventor", "entrepreneur", "businessman", "businesswoman", "athlete", "player"
              ];
              
              geoResults = geoData.geonames
                .filter(g => {
                  // Ki≈üi isimlerini filtrele
                  const text = (g.name + ' ' + (g.fcodeName || '')).toLowerCase();
                  return !negativeKeywords.some(kw => text.includes(kw));
                })
                .map(g => ({
                  label: g.name,
                  value: g.name,
                  description: `${g.countryName || ''} ${g.fcodeName || ''}`,
                  source: 'geonames'
                }));
            }
          } catch {}
          // Pop√ºler yerlerden arama yap
          let popularResults = [];
          try {
            const response = await fetch('/popular-places.json');
            const popularPlaces = await response.json();
            // Hem T√ºrk√ße hem ƒ∞ngilizce isimlerde arama yap
            popularResults = popularPlaces
              .filter(p => {
                const nameTr = (p.name_tr || '').toLowerCase();
                const nameEn = (p.name_en || '').toLowerCase();
                const cityTr = (p.city_tr || '').toLowerCase();
                const cityEn = (p.city_en || '').toLowerCase();
                const searchQuery = query.toLowerCase();
                
                return nameTr.includes(searchQuery) || 
                       nameEn.includes(searchQuery) || 
                       cityTr.includes(searchQuery) || 
                       cityEn.includes(searchQuery);
              })
              .map(p => ({
                label: p.name_tr,
                value: p.name_tr,
                description: `${p.city_tr || ''}, ${p.country_tr || ''} - ${p.category_tr || ''}`,
                source: 'popular',
                data: p // T√ºm veriyi sakla
              }));
          } catch {}
          
          // Sonu√ßlarƒ± birle≈ütir ve sƒ±rala (pop√ºler yerler √∂nce gelsin)
          const allResults = [...popularResults, ...wikiResults, ...geoResults].filter((v, i, a) =>
            a.findIndex(t => t.value === v.value) === i
          );
          awesomplete.list = allResults;
          lastSuggestions = allResults;
        });
        // Se√ßim veya enter ile ekle
        searchBox.addEventListener('awesomplete-selectcomplete', async (e) => {
          const user = auth.currentUser;
          if (!user) {
            showStatus('Giri≈ü yapmadan yer ekleyemezsiniz.', 'error');
            return;
          }
          const selectedLabel = searchBox.value.trim();
          const item = lastSuggestions.find(s => s.label === selectedLabel) || { value: selectedLabel, description: '', source: 'manual' };
          addPlaceBtn.disabled = true;
          try {
            // Eƒüer se√ßilen √∂ƒüe pop√ºler yerlerden geldiyse, doƒürudan o veriyi kullan
            if (item.source === 'popular' && item.data) {
              const placeData = item.data;
              await addDoc(collection(db, `users/${user.uid}/places`), {
                name: placeData.name_tr || item.value,
                city: placeData.city_tr || '',
                country: (placeData.country_tr || '').toUpperCase(),
                category: placeData.category_tr || '',
                description: placeData.description_tr || item.description || '',
                visited: false,
                name_en: placeData.name_en || '',
                city_en: placeData.city_en || '',
                country_en: (placeData.country_en || '').toUpperCase(),
                category_en: placeData.category_en || '',
                description_en: placeData.description_en || ''
              });
            } else {
              // Pop√ºler yerler JSON'unda arama
              let placeData = null;
              try {
                const response = await fetch('/popular-places.json');
                const popularPlaces = await response.json();
                // Hem T√ºrk√ße hem ƒ∞ngilizce isme bak
                placeData = popularPlaces.find(p =>
                  p.name_tr?.toLowerCase() === selectedLabel.toLowerCase() ||
                  p.name_en?.toLowerCase() === selectedLabel.toLowerCase()
                );
              } catch {}
              
              // Eƒüer pop√ºler yerler JSON'unda varsa, t√ºm alanlarƒ± oradan doldur
              if (placeData) {
                await addDoc(collection(db, `users/${user.uid}/places`), {
                  name: placeData.name_tr || item.value,
                  city: placeData.city_tr || '',
                  country: (placeData.country_tr || '').toUpperCase(),
                  category: placeData.category_tr || '',
                  description: placeData.description_tr || item.description || '',
                  visited: false,
                  name_en: placeData.name_en || '',
                  city_en: placeData.city_en || '',
                  country_en: (placeData.country_en || '').toUpperCase(),
                  category_en: placeData.category_en || '',
                  description_en: placeData.description_en || ''
                });
              } else {
                // Yoksa, mevcut mantƒ±kla ekle ama √ºlkeyi se√ßili √ºlke yap
                await addDoc(collection(db, `users/${user.uid}/places`), {
                  name: item.value,
                  city: '',
                  country: (countryFilter.value || '').toUpperCase(),
                  category: '',
                  description: item.description || '',
                  visited: false
                });
              }
            }
            showStatus('Yeni yer eklendi!', 'success');
            searchBox.value = '';
            addPlaceBtn.disabled = false;
            loadPlacesTable(user);
          } catch (err) {
            showStatus('Yer eklenirken hata: ' + err.message, 'error');
            addPlaceBtn.disabled = false;
          }
        });

        // Initialize
        console.log('Firebase initialized successfully');
        showStatus('Uygulama hazƒ±r. Giri≈ü yapabilirsiniz.', 'info');

        // Pop√ºler yerler JSON'ƒ±nƒ± y√ºkle ve i≈üle
        async function loadPopularPlaces() {
          try {
            const response = await fetch('/popular-places.json');
            const popularPlaces = await response.json();
            return popularPlaces;
          } catch (error) {
            console.error('Pop√ºler yerler y√ºklenemedi:', error);
            return [];
          }
        }

        // Yeni kullanƒ±cƒ± i√ßin pop√ºler yerleri y√ºkle
        async function loadPopularPlacesForNewUser(user) {
          try {
            const popularPlaces = await loadPopularPlaces();
            const userPlacesRef = collection(db, `users/${user.uid}/places`);
            
            // Kullanƒ±cƒ±nƒ±n mevcut yerlerini kontrol et
            const existingSnapshot = await getDocs(userPlacesRef);
            const existingPlaces = new Set();
            existingSnapshot.forEach(doc => {
              const data = doc.data();
              // Hem T√ºrk√ße hem ƒ∞ngilizce isimleri kontrol et
              existingPlaces.add(`${data.name}-${data.country}`);
              if (data.name_en) {
                existingPlaces.add(`${data.name_en}-${data.country_en || data.country}`);
              }
            });

            // Pop√ºler yerleri ekle (eƒüer yoksa)
            let addedCount = 0;
            for (const place of popularPlaces) {
              const placeKeyTr = `${place.name_tr}-${place.country_tr.toUpperCase()}`;
              const placeKeyEn = `${place.name_en}-${place.country_en.toUpperCase()}`;
              
              if (!existingPlaces.has(placeKeyTr) && !existingPlaces.has(placeKeyEn)) {
                await addDoc(userPlacesRef, {
                  name: place.name_tr,
                  city: place.city_tr,
                  country: place.country_tr.toUpperCase(),
                  category: place.category_tr,
                  description: place.description_tr,
                  visited: false,
                  name_en: place.name_en,
                  city_en: place.city_en,
                  country_en: place.country_en.toUpperCase(),
                  category_en: place.category_en,
                  description_en: place.description_en
                });
                addedCount++;
              }
            }
            
            if (addedCount > 0) {
              showStatus(`${addedCount} pop√ºler yer eklendi!`, 'success');
            } else {
              showStatus('T√ºm pop√ºler yerler zaten mevcut.', 'info');
            }
          } catch (error) {
            console.error('Pop√ºler yerler y√ºklenirken hata:', error);
            showStatus('Pop√ºler yerler y√ºklenirken hata olu≈ütu: ' + error.message, 'error');
          }
        }

        // Firestore'a undefined alan g√∂ndermeyi engelleyen yardƒ±mcƒ± fonksiyon
        function filterUndefinedFields(obj) {
          const result = {};
          for (const key in obj) {
            if (obj[key] !== undefined) {
              result[key] = obj[key];
            }
          }
          return result;
        }

        // Mevcut kullanƒ±cƒ± i√ßin eksik a√ßƒ±klamalarƒ± doldur
        async function fillMissingDescriptions(user) {
          try {
            const popularPlaces = await loadPopularPlaces();
            const userPlacesRef = collection(db, `users/${user.uid}/places`);
            const snapshot = await getDocs(userPlacesRef);
            
            let updatedCount = 0;
            const { doc, updateDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
            
            for (const docSnapshot of snapshot.docs) {
              const data = docSnapshot.data();
              // A√ßƒ±klama eksikse pop√ºler yerlerden bul
              if (!data.description || data.description.trim() === '') {
                // Hem T√ºrk√ße hem ƒ∞ngilizce isimlerle e≈üle≈ütir
                let matchingPlace = popularPlaces.find(place => 
                  (place.name_tr === data.name && place.country_tr.toUpperCase() === data.country) ||
                  (place.name_en === data.name && place.country_en.toUpperCase() === data.country)
                );
                
                // Eƒüer bulunamazsa, sadece isimle e≈üle≈ütir
                if (!matchingPlace) {
                  matchingPlace = popularPlaces.find(place => 
                    place.name_tr === data.name || place.name_en === data.name
                  );
                }
                
                if (matchingPlace) {
                  const docRef = doc(db, `users/${user.uid}/places`, docSnapshot.id);
                  await updateDoc(docRef, {
                    description: matchingPlace.description_tr,
                    name_en: matchingPlace.name_en,
                    city_en: matchingPlace.city_en,
                    country_en: matchingPlace.country_en.toUpperCase(),
                    category_en: matchingPlace.category_en,
                    description_en: matchingPlace.description_en
                  });
                  updatedCount++;
                }
              }
            }
            
            if (updatedCount > 0) {
              showStatus(`${updatedCount} yerin a√ßƒ±klamasƒ± g√ºncellendi!`, 'success');
            } else {
              showStatus('G√ºncellenecek a√ßƒ±klama bulunamadƒ±.', 'info');
            }
          } catch (error) {
            console.error('A√ßƒ±klamalar doldurulurken hata:', error);
            showStatus('A√ßƒ±klamalar doldurulurken hata olu≈ütu: ' + error.message, 'error');
          }
        }

        // √úlke kayƒ±tlarƒ±nƒ± birle≈ütir ve eksik yerleri ekle
        async function mergeCountriesAndAddMissingPlaces(user) {
          try {
            const popularPlaces = await loadPopularPlaces();
            const userPlacesRef = collection(db, `users/${user.uid}/places`);
            const snapshot = await getDocs(userPlacesRef);
            const { doc, updateDoc, deleteDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');

            // T√ºm yerleri √ºlke+isim kombinasyonuna g√∂re grupla
            const placeMap = new Map();
            const toDelete = [];
            for (const docSnapshot of snapshot.docs) {
              const data = docSnapshot.data();
              const country = (data.country || '').toUpperCase();
              const name = (data.name || '').trim();
              const key = `${country}|||${name}`;
              if (!placeMap.has(key)) {
                placeMap.set(key, { ...data, docId: docSnapshot.id });
              } else {
                // Aynƒ± √ºlke ve isimde birden fazla kayƒ±t varsa, sadece birini bƒ±rak
                toDelete.push(docSnapshot.id);
              }
            }

            // Silinecek tekrar eden kayƒ±tlarƒ± sil
            for (const docId of toDelete) {
              const docRef = doc(db, `users/${user.uid}/places`, docId);
              await deleteDoc(docRef);
            }

            // A√ßƒ±klamalarƒ± g√ºncelle ve eksik pop√ºler yerleri ekle
            let updatedCount = 0;
            let addedCount = 0;
            const existingKeys = new Set(placeMap.keys());
            // A√ßƒ±klamalarƒ± g√ºncelle
            for (const [key, place] of placeMap.entries()) {
              if (!place.description || place.description.trim() === '') {
                const [country, name] = key.split('|||');
                const matching = popularPlaces.find(p =>
                  (p.country_tr && p.country_tr.toUpperCase() === country && p.name_tr === name) ||
                  (p.country_en && p.country_en.toUpperCase() === country && p.name_en === name)
                );
                if (matching) {
                  const docRef = doc(db, `users/${user.uid}/places`, place.docId);
                  await updateDoc(docRef, filterUndefinedFields({
                    description: matching.description_tr,
                    name_en: matching.name_en,
                    city_en: matching.city_en,
                    country_en: matching.country_en ? matching.country_en.toUpperCase() : undefined,
                    category_en: matching.category_en,
                    description_en: matching.description_en
                  }));
                  updatedCount++;
                }
              }
            }
            // Eksik pop√ºler yerleri ekle
            for (const p of popularPlaces) {
              const country = (p.country_tr || p.country_en || '').toUpperCase();
              const name = p.name_tr;
              const key = `${country}|||${name}`;
              if (!existingKeys.has(key)) {
                await addDoc(userPlacesRef, filterUndefinedFields({
                  name: p.name_tr,
                  city: p.city_tr,
                  country: p.country_tr ? p.country_tr.toUpperCase() : undefined,
                  category: p.category_tr,
                  description: p.description_tr,
                  visited: false,
                  name_en: p.name_en,
                  city_en: p.city_en,
                  country_en: p.country_en ? p.country_en.toUpperCase() : undefined,
                  category_en: p.category_en,
                  description_en: p.description_en
                }));
                addedCount++;
              }
            }
            let msg = '';
            if (toDelete.length > 0) msg += `${toDelete.length} tekrar eden kayƒ±t silindi. `;
            if (updatedCount > 0) msg += `${updatedCount} a√ßƒ±klama g√ºncellendi. `;
            if (addedCount > 0) msg += `${addedCount} yeni yer eklendi.`;
            if (!msg) msg = 'Herhangi bir deƒüi≈üiklik yapƒ±lmadƒ±.';
            showStatus(msg, 'success');
          } catch (error) {
            console.error('√úlke birle≈ütirme hatasƒ±:', error);
            showStatus('√úlke birle≈ütirme hatasƒ±: ' + error.message, 'error');
          }
        }

        async function loadPlacesTable(user) {
          if (!user) {
            placesTableContainer.style.display = 'none';
            return;
          }
          // Kullanƒ±cƒ±ya ait places koleksiyonu yolu
          const placesCol = collection(db, `users/${user.uid}/places`);
          const snapshot = await getDocs(placesCol);

          // Tabloyu temizle
          placesTableBody.innerHTML = '';

          // Filtre comboboxlarƒ±nƒ± hazƒ±rla
          const countryFilter = document.getElementById('countryFilter');
          const visitedFilter = document.getElementById('visitedFilter');
          // Arama kutusu sadece √∂neri i√ßin, filtreleme yok

          // T√ºm √ºlkeleri topla ve normalize et
          const places = [];
          const countrySet = new Set();
          snapshot.forEach(doc => {
            const data = doc.data();
            places.push({ ...data, _docId: doc.id });
            if (data.country) {
              // ƒ∞ngilizce anahtara normalize et
              const englishKey = getEnglishCountryKeySafe(data.country);
              countrySet.add(englishKey);
            }
          });
          const countries = Array.from(countrySet).sort();

          // T√ºrk√ße isme g√∂re sƒ±rala
          countries.sort((a, b) => {
            const trA = toTurkishUpper(countryNames[a]?.[currentLang] || a);
            const trB = toTurkishUpper(countryNames[b]?.[currentLang] || b);
            return trA.localeCompare(trB, 'tr');
          });
          // √úlke combobox'ƒ±nƒ± doldur (sadece ilk y√ºklemede veya √ºlke sayƒ±sƒ± deƒüi≈ütiyse)
          if (countryFilter.options.length === 0 || countryFilter.options.length !== countries.length) {
            countryFilter.innerHTML = '';
            countries.forEach(englishKey => {
              const opt = document.createElement('option');
              opt.value = englishKey;
              const trName = countryNames[englishKey]?.[currentLang] || englishKey;
              opt.textContent = toTurkishUpper(trName);
              countryFilter.appendChild(opt);
            });
          }
          // Varsayƒ±lan √ºlke: ALMANYA
          if (!countryFilter.value) countryFilter.value = 'ALMANYA';
          // Varsayƒ±lan ziyaret filtresi: Gezilmedi
          if (!visitedFilter.value) visitedFilter.value = 'notvisited';

          // Filtreye g√∂re verileri s√ºz
          let filtered = [];
          const selectedCountry = countryFilter.value;
          const selectedVisited = visitedFilter.value;
          filtered = places.filter(p => getEnglishCountryKeySafe(p.country) === selectedCountry);
          if (selectedVisited === 'visited') filtered = filtered.filter(p => p.visited);
          else if (selectedVisited === 'notvisited') filtered = filtered.filter(p => !p.visited);

          filtered.sort((a, b) => (a.city || '').localeCompare(b.city || ''));
          filtered.forEach(data => {
            const row = document.createElement('tr');
            const categoryHtml = (data.category || '').replace(/\s*\/\s*/g, '<br>');
            const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent((data.name || '') + ' ' + (data.city || '') + ' ' + (data.country || ''))}`;
            row.innerHTML = `
              <td class="name">${data.name || ''}</td>
              <td>${data.city || ''}</td>
              <td>${categoryHtml}</td>
              <td class="description">${data.description || ''}</td>
              <td style="text-align:center;"><input type="checkbox" class="visited-checkbox" data-docid="${data._docId}" ${data.visited ? 'checked' : ''}></td>
              <td style="text-align:center;"><input type="checkbox" class="route-checkbox" data-name="${data.name || ''}" data-city="${data.city || ''}" data-country="${data.country || ''}"></td>
              <td style="text-align:center;"><a href="${googleMapsUrl}" target="_blank" style="background:#4285f4;color:white;border:none;padding:4px 8px;border-radius:5px;text-decoration:none;font-size:12px;">üó∫Ô∏è Maps</a></td>
              <td style="text-align:center;"><button class="delete-place-btn" data-docid="${data._docId}" style="background:#dc3545;color:white;border:none;padding:4px 10px;border-radius:5px;cursor:pointer;">Sil</button></td>
            `;
            placesTableBody.appendChild(row);
          });

          // Checkbox event listener
          document.querySelectorAll('.visited-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', async (e) => {
              const docId = e.target.getAttribute('data-docid');
              const checked = e.target.checked;
              try {
                const placeDocRef = collection(db, `users/${user.uid}/places`);
                // Firestore doc() ile referans olu≈ütur
                const { doc, updateDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
                const ref = doc(db, `users/${user.uid}/places`, docId);
                await updateDoc(ref, { visited: checked });
              } catch (err) {
                alert('G√ºncelleme hatasƒ±: ' + err.message);
                e.target.checked = !checked; // Hata olursa eski haline d√∂nd√ºr
              }
            });
          });

          // Silme butonu event listener
          document.querySelectorAll('.delete-place-btn').forEach(btn => {
            btn.addEventListener('click', async (e) => {
              const docId = e.target.getAttribute('data-docid');
              if (!confirm('Bu yeri silmek istediƒüinize emin misiniz?')) return;
              try {
                const { doc, deleteDoc } = await import('https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js');
                const ref = doc(db, `users/${user.uid}/places`, docId);
                await deleteDoc(ref);
                showStatus('Yer silindi.', 'success');
                loadPlacesTable(user);
              } catch (err) {
                showStatus('Silme hatasƒ±: ' + err.message, 'error');
              }
            });
          });

          // Rota olu≈üturma butonu event listener
          const createRouteBtn = document.getElementById('createRouteBtn');
          if (createRouteBtn) {
            createRouteBtn.addEventListener('click', () => {
              createGoogleMapsRoute();
            });
          }

          // ≈ûehir/√úlke ekleme butonu event listener
          const addLocationBtn = document.getElementById('addLocationBtn');
          if (addLocationBtn) {
            addLocationBtn.addEventListener('click', () => {
              addTouristPlacesForLocation();
            });
          }
          
          // ≈ûehir/√úlke √∂neri sistemi
          const locationSuggestionBox = document.getElementById('locationSuggestionBox');
          const locationSuggestions = document.getElementById('locationSuggestions');
          
          if (locationSuggestionBox && locationSuggestions) {
            locationSuggestionBox.addEventListener('input', function() {
              const inputValue = this.value.toLowerCase();
              
              if (inputValue.length < 2) {
                locationSuggestions.innerHTML = '';
                return;
              }
              
              // ≈ûehir ve √ºlke √∂nerileri listesi
              const suggestions = [
                // Pop√ºler ≈üehirler
                'Aachen', 'Berlin', 'M√ºnchen', 'Hamburg', 'K√∂ln', 'Frankfurt', 'Stuttgart', 'D√ºsseldorf',
                'Paris', 'Lyon', 'Marseille', 'Toulouse', 'Nice', 'Bordeaux', 'Lille', 'Strasbourg',
                'Roma', 'Milano', 'Napoli', 'Torino', 'Venezia', 'Firenze', 'Bologna', 'Palermo',
                'Madrid', 'Barcelona', 'Valencia', 'Sevilla', 'Bilbao', 'M√°laga', 'Zaragoza', 'Murcia',
                'London', 'Manchester', 'Birmingham', 'Liverpool', 'Leeds', 'Glasgow', 'Edinburgh', 'Bristol',
                'New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix', 'Philadelphia', 'San Antonio', 'San Diego',
                'Tokyo', 'Osaka', 'Kyoto', 'Yokohama', 'Nagoya', 'Sapporo', 'Fukuoka', 'Kobe',
                'Istanbul', 'Ankara', 'ƒ∞zmir', 'Bursa', 'Antalya', 'Adana', 'Konya', 'Gaziantep',
                // √úlkeler
                'Germany', 'France', 'Italy', 'Spain', 'United Kingdom', 'United States', 'Japan', 'Turkey',
                'Netherlands', 'Belgium', 'Switzerland', 'Austria', 'Portugal', 'Greece', 'Poland',
                'Czech Republic', 'Hungary', 'Romania', 'Bulgaria', 'Croatia', 'Slovakia', 'Slovenia',
                'Estonia', 'Latvia', 'Lithuania', 'Canada', 'Australia', 'South Korea', 'China', 'India',
                'Brazil', 'Russia', 'Mexico', 'Argentina'
              ];
              
              // Filtreleme
              const filteredSuggestions = suggestions.filter(suggestion => 
                suggestion.toLowerCase().includes(inputValue)
              ).slice(0, 10); // ƒ∞lk 10 √∂neriyi g√∂ster
              
              // Datalist'i g√ºncelle
              locationSuggestions.innerHTML = '';
              filteredSuggestions.forEach(suggestion => {
                const option = document.createElement('option');
                option.value = suggestion;
                locationSuggestions.appendChild(option);
              });
            });
          }

          placesTableContainer.style.display = '';
        }

        // ≈ûehir/√úlke i√ßin turistik yerler ekleme fonksiyonu
         async function addTouristPlacesForLocation() {
           const locationInput = document.getElementById('locationSuggestionBox');
           const location = locationInput.value.trim();
           
           if (!location) {
             showStatus('L√ºtfen bir ≈üehir veya √ºlke adƒ± girin!', 'error');
             return;
           }
           
           const user = auth.currentUser;
           if (!user) {
             showStatus('L√ºtfen √∂nce giri≈ü yapƒ±n!', 'error');
             return;
           }
           
           try {
             showStatus(`${location} i√ßin turistik yerler ara≈ütƒ±rƒ±lƒ±yor...`, 'info');
             
             // √ñnce ≈üehir kontrol√º yap - ≈üehir haritasƒ±nda var mƒ±?
             const detectedCountry = detectCountryFromCity(location);
             if (detectedCountry) {
               // Bu bir ≈üehir, ≈üehir yerlerini ekle
               await addCityPlaces(user, location);
               locationInput.value = '';
               return;
             }
             
             // ≈ûehir deƒüilse, √ºlke kontrol√º yap
             const countryData = await checkIfCountryExists(location);
             if (countryData) {
               await addCountryPlaces(user, countryData, location);
               locationInput.value = '';
               return;
             }
             
             // Ne ≈üehir ne de √ºlke olarak tanƒ±nmƒ±yorsa
             showStatus(`${location} ≈üehir veya √ºlke olarak tanƒ±nmadƒ±. L√ºtfen ge√ßerli bir ≈üehir veya √ºlke adƒ± girin.`, 'error');
             
           } catch (error) {
             console.error('Turistik yerler eklenirken hata:', error);
             showStatus('Turistik yerler eklenirken bir hata olu≈ütu: ' + error.message, 'error');
           }
         }
         
         // √úlke kontrol√º - dinamik web ara≈ütƒ±rmasƒ± ile
         async function checkIfCountryExists(countryName) {
           const countryFiles = {
             'almanya': 'popular-germany.json', 'germany': 'popular-germany.json',
             'fransa': 'popular-france.json', 'france': 'popular-france.json',
             'italya': 'popular-italy.json', 'italy': 'popular-italy.json',
             'ispanya': 'popular-spain.json', 'spain': 'popular-spain.json',
             'hollanda': 'popular-netherlands.json', 'netherlands': 'popular-netherlands.json',
             'isvi√ßre': 'popular-switzerland.json', 'switzerland': 'popular-switzerland.json',
             'bel√ßika': 'popular-belgium.json', 'belgium': 'popular-belgium.json',
             'avusturya': 'popular-austria.json', 'austria': 'popular-austria.json',
             'polonya': 'popular-poland.json', 'poland': 'popular-poland.json',
             '√ßek cumhuriyeti': 'popular-czech-republic.json', 'czech republic': 'popular-czech-republic.json',
             'macaristan': 'popular-hungary.json', 'hungary': 'popular-hungary.json',
             'romanya': 'popular-romania.json', 'romania': 'popular-romania.json',
             'yunanistan': 'popular-greece.json', 'greece': 'popular-greece.json',
             'portekiz': 'popular-portugal.json', 'portugal': 'popular-portugal.json',
             'hƒ±rvatistan': 'popular-croatia.json', 'croatia': 'popular-croatia.json',
             'slovenya': 'popular-slovenia.json', 'slovenia': 'popular-slovenia.json',
             'bulgaristan': 'popular-bulgaria.json', 'bulgaria': 'popular-bulgaria.json',
             'slovakya': 'popular-slovakia.json', 'slovakia': 'popular-slovakia.json',
             'estonya': 'popular-estonia.json', 'estonia': 'popular-estonia.json',
             'letonya': 'popular-latvia.json', 'latvia': 'popular-latvia.json',
             'litvanya': 'popular-lithuania.json', 'lithuania': 'popular-lithuania.json',
             'g√ºney kore': 'popular-south-korea.json', 'south korea': 'popular-south-korea.json',
             'japonya': 'popular-japan.json', 'japan': 'popular-japan.json',
             '√ßin': 'popular-china.json', 'china': 'popular-china.json'
           };
           
           const fileName = countryFiles[countryName.toLowerCase()];
           if (fileName) {
             try {
               const response = await fetch(`/json/${fileName}`);
               if (response.ok) {
                 const data = await response.json();
                 return { fileName, data };
               }
             } catch (error) {
               console.error('√úlke dosyasƒ± y√ºklenirken hata:', error);
             }
           }
           
           // Eƒüer mevcut dosyalarda yoksa, dinamik olarak web ara≈ütƒ±rmasƒ± yap
           return await generateCountryPlacesFromWeb(countryName);
         }
         
         // Web ara≈ütƒ±rmasƒ± ile √ºlke turistik yerlerini olu≈ütur
         async function generateCountryPlacesFromWeb(countryName) {
           try {
             // Kullanƒ±cƒ±ya bilgi ver
             showStatus(`${countryName} i√ßin turistik yerler ara≈ütƒ±rƒ±lƒ±yor...`, 'info');
             
             // √úlkenin en pop√ºler turistik yerlerini olu≈ütur
             const places = await searchTouristPlacesForCountry(countryName);
             
             if (places && places.length >= 10) {
               return {
                 fileName: `dynamic-${countryName.toLowerCase().replace(/\s+/g, '-')}.json`,
                 data: places
               };
             } else {
               console.warn(`${countryName} i√ßin yeterli turistik yer bulunamadƒ±:`, places?.length || 0);
               return null;
             }
           } catch (error) {
             console.error(`${countryName} i√ßin web ara≈ütƒ±rmasƒ± hatasƒ±:`, error);
             return null;
           }
         }
         
         // √úlke i√ßin turistik yerler ara
         async function searchTouristPlacesForCountry(countryName) {
           // √úlke adƒ±nƒ± normalize et
           const normalizedCountry = normalizeCountryName(countryName);
           
           // √úlkeye √∂zel turistik yerler veritabanƒ±
           const countryAttractions = {
             'brezilya': [
               { name: 'Christ the Redeemer', city: 'Rio de Janeiro', category: 'Anƒ±t', description: 'Rio de Janeiro\'da bulunan d√ºnyaca √ºnl√º ƒ∞sa heykeli. Art Deco tarzƒ±nda in≈üa edilen bu 30 metre y√ºksekliƒüindeki heykel, ≈üehrin simgesi ve Brezilya\'nƒ±n en √∂nemli turistik yerlerinden biridir.' },
               { name: 'Sugarloaf Daƒüƒ±', city: 'Rio de Janeiro', category: 'Doƒüal G√ºzellik', description: 'Rio de Janeiro\'nƒ±n simgesel daƒüƒ±. Teleferikle √ßƒ±kƒ±lan bu 396 metre y√ºksekliƒüindeki daƒüdan ≈üehrin ve Copacabana plajƒ±nƒ±n muhte≈üem manzarasƒ± izlenir.' },
               { name: 'Iguazu ≈ûelaleleri', city: 'Foz do Igua√ßu', category: 'Doƒüal G√ºzellik', description: 'Arjantin sƒ±nƒ±rƒ±nda bulunan d√ºnyaca √ºnl√º ≈üelaleler. 275 adet ≈üelaleden olu≈üan bu doƒüa harikasƒ±, UNESCO D√ºnya Mirasƒ± listesindedir.' },
               { name: 'Copacabana Plajƒ±', city: 'Rio de Janeiro', category: 'Plaj', description: 'D√ºnyanƒ±n en √ºnl√º plajlarƒ±ndan biri. 4 km uzunluƒüundaki bu plaj, beyaz kumlarƒ± ve canlƒ± atmosferiyle Rio\'nun kalbidir.' },
               { name: 'Amazon Yaƒümur Ormanlarƒ±', city: 'Manaus', category: 'Doƒüal G√ºzellik', description: 'D√ºnyanƒ±n en b√ºy√ºk yaƒümur ormanƒ±. Binlerce bitki ve hayvan t√ºr√ºne ev sahipliƒüi yapan bu orman, d√ºnyanƒ±n akciƒüerleri olarak bilinir.' },
               { name: 'Pantanal', city: 'Cuiab√°', category: 'Doƒüal G√ºzellik', description: 'D√ºnyanƒ±n en b√ºy√ºk sulak alanƒ±. Jaguar, kaiman ve y√ºzlerce ku≈ü t√ºr√ºn√ºn ya≈üadƒ±ƒüƒ± bu b√∂lge, doƒüa severler i√ßin cennet.' },
               { name: 'Salvador Tarihi Merkezi', city: 'Salvador', category: 'Tarihi B√∂lge', description: 'Kolonyal d√∂nem mimarisinin en g√ºzel √∂rneklerinin bulunduƒüu tarihi merkez. Renkli evleri ve cobblestone sokaklarƒ± ile UNESCO D√ºnya Mirasƒ±.' },
               { name: 'Fernando de Noronha', city: 'Fernando de Noronha', category: 'Ada', description: 'Brezilya\'nƒ±n cennet adasƒ±. Kristal berraklƒ±ƒüƒ±ndaki sularƒ±, renkli mercan resifleri ve egzotik deniz ya≈üamƒ± ile dalƒ±≈ü tutkunlarƒ±nƒ±n g√∂zdesi.' },
               { name: 'Len√ß√≥is Maranhenses', city: 'Barreirinhas', category: 'Doƒüal G√ºzellik', description: 'Beyaz kum tepeleri ve turkuaz g√∂ller arasƒ±nda olu≈üan s√ºrreal manzara. Yaƒümur mevsiminde olu≈üan bu doƒüa harikasƒ±, d√ºnyanƒ±n en benzersiz yerlerinden biri.' },
               { name: 'Ouro Preto', city: 'Ouro Preto', category: 'Tarihi ≈ûehir', description: 'Altƒ±n madenciliƒüi d√∂neminden kalma barok mimarisi ile √ºnl√º tarihi ≈üehir. Ta≈ü d√∂≈üeli sokaklarƒ± ve kolonyal kiliseler ile UNESCO D√ºnya Mirasƒ±.' }
             ],
             'arjantin': [
               { name: 'Iguazu ≈ûelaleleri', city: 'Puerto Iguazu', category: 'Doƒüal G√ºzellik', description: 'Brezilya sƒ±nƒ±rƒ±nda bulunan muhte≈üem ≈üelaleler. 275 adet ≈üelaleden olu≈üan bu doƒüa harikasƒ±, UNESCO D√ºnya Mirasƒ± listesindedir.' },
               { name: 'Perito Moreno Buzulu', city: 'El Calafate', category: 'Buzul', description: 'Patagonia\'da bulunan aktif buzul. 250 km¬≤ alana sahip bu buzul, s√ºrekli hareket halinde olup buzul kƒ±rƒ±lmalarƒ± izlenebilir.' },
               { name: 'Buenos Aires Tango Mahallesi', city: 'Buenos Aires', category: 'K√ºlt√ºrel B√∂lge', description: 'Tango\'nun doƒüduƒüu renkli mahalle La Boca. Caminito sokaƒüƒ±, renkli evleri ve sokak sanat√ßƒ±larƒ± ile √ºnl√ºd√ºr.' },
               { name: 'Mendoza ≈ûarap B√∂lgesi', city: 'Mendoza', category: '≈ûarap B√∂lgesi', description: 'And Daƒülarƒ± eteklerinde bulunan d√ºnyaca √ºnl√º ≈üarap b√∂lgesi. Malbec √ºz√ºm√º ile √ºnl√º bu b√∂lgede ≈üarap tadƒ±mlarƒ± yapƒ±lƒ±r.' },
               { name: 'Ushuaia', city: 'Ushuaia', category: '≈ûehir', description: 'D√ºnyanƒ±n en g√ºney ≈üehri. Tierra del Fuego\'da bulunan bu ≈üehir, Antarktika turlarƒ±nƒ±n ba≈ülangƒ±√ß noktasƒ±dƒ±r.' },
               { name: 'Salta', city: 'Salta', category: 'Tarihi ≈ûehir', description: 'Kolonyal mimarisi ile √ºnl√º g√ºzel ≈üehir. And Daƒülarƒ±\'nƒ±n eteklerinde bulunan bu ≈üehir, geleneksel Arjantin k√ºlt√ºr√ºn√ºn merkezi.' },
               { name: 'Bariloche', city: 'San Carlos de Bariloche', category: 'Doƒüal G√ºzellik', description: 'G√∂ller b√∂lgesinde bulunan tatil ≈üehri. Nahuel Huapi G√∂l√º kƒ±yƒ±sƒ±nda yer alan bu ≈üehir, kayak ve doƒüa sporlarƒ± i√ßin √ºnl√º.' },
               { name: 'Pen√≠nsula Vald√©s', city: 'Puerto Madryn', category: 'Doƒüal G√ºzellik', description: 'Balina g√∂zlemi i√ßin d√ºnyaca √ºnl√º yarƒ±mada. G√ºney balinalarƒ±nƒ±n √ºreme alanƒ± olan bu b√∂lge, UNESCO D√ºnya Mirasƒ±.' },
               { name: 'Quebrada de Humahuaca', city: 'Humahuaca', category: 'Doƒüal G√ºzellik', description: 'Renkli kayalƒ±klarƒ± ile √ºnl√º vadi. And Daƒülarƒ±\'nda bulunan bu vadi, UNESCO D√ºnya Mirasƒ± listesindedir.' },
               { name: 'El Chalten', city: 'El Chalten', category: 'Doƒüal G√ºzellik', description: 'Fitz Roy Daƒüƒ±\'nƒ±n eteklerinde bulunan trekking cenneti. Patagonia\'nƒ±n en g√ºzel manzaralarƒ±na sahip bu b√∂lge, daƒücƒ±larƒ±n g√∂zdesi.' }
             ],
             'meksika': [
               { name: 'Chichen Itza', city: 'Yucatan', category: 'Tarihi Yapƒ±', description: 'Maya medeniyetinin en √∂nemli kalƒ±ntƒ±larƒ±ndan biri. El Castillo piramidi ile √ºnl√º bu antik ≈üehir, UNESCO D√ºnya Mirasƒ± ve D√ºnyanƒ±n Yedi Harikasƒ±\'ndan biri.' },
               { name: 'Teotihuacan', city: 'Mexico City', category: 'Tarihi Yapƒ±', description: 'G√ºne≈ü ve Ay piramitleri ile √ºnl√º antik ≈üehir. M√ñ 100-650 yƒ±llarƒ± arasƒ±nda Mesoamerika\'nƒ±n en b√ºy√ºk ≈üehri olan bu yer, UNESCO D√ºnya Mirasƒ±.' },
               { name: 'Cancun', city: 'Cancun', category: 'Plaj', description: 'Karayip Denizi kƒ±yƒ±sƒ±nda bulunan tatil cenneti. Beyaz kumlu plajlarƒ±, turkuaz denizi ve Maya kalƒ±ntƒ±larƒ± ile √ºnl√º.' },
               { name: 'Tulum', city: 'Tulum', category: 'Tarihi Yapƒ±', description: 'Karayip kƒ±yƒ±sƒ±nda bulunan Maya kalƒ±ntƒ±larƒ±. Deniz manzaralƒ± konumu ile d√ºnyanƒ±n en g√ºzel antik ≈üehirlerinden biri.' },
               { name: 'Palenque', city: 'Chiapas', category: 'Tarihi Yapƒ±', description: 'Yaƒümur ormanlarƒ± i√ßinde bulunan Maya ≈üehri. Tapƒ±nak ve saraylarƒ± ile Maya mimarisinin en g√ºzel √∂rneklerini sunar.' },
               { name: 'Guanajuato', city: 'Guanajuato', category: 'Tarihi ≈ûehir', description: 'Renkli evleri ve yeraltƒ± t√ºnelleri ile √ºnl√º kolonyal ≈üehir. G√ºm√º≈ü madenciliƒüi d√∂neminden kalma mimarisi ile UNESCO D√ºnya Mirasƒ±.' },
               { name: 'Oaxaca', city: 'Oaxaca', category: 'K√ºlt√ºrel ≈ûehir', description: 'Geleneksel Meksika k√ºlt√ºr√ºn√ºn kalbi. El sanatlarƒ±, yerel mutfaƒüƒ± ve kolonyal mimarisi ile √ºnl√º UNESCO D√ºnya Mirasƒ± ≈üehri.' },
               { name: 'Copper Canyon', city: 'Chihuahua', category: 'Doƒüal G√ºzellik', description: 'Grand Canyon\'dan daha derin olan kanyon sistemi. Tarahumara yerlilerinin ya≈üadƒ±ƒüƒ± bu b√∂lge, tren yolculuƒüu ile ke≈üfedilir.' },
               { name: 'Isla Mujeres', city: 'Quintana Roo', category: 'Ada', description: 'Cancun yakƒ±nlarƒ±nda bulunan k√º√ß√ºk ada. Kristal berraklƒ±ƒüƒ±ndaki sularƒ± ve rahat atmosferi ile balayƒ± √ßiftlerinin g√∂zdesi.' },
               { name: 'Puebla', city: 'Puebla', category: 'Tarihi ≈ûehir', description: 'Barok mimarisi ve renkli √ßinileri ile √ºnl√º kolonyal ≈üehir. Mole poblano\'nun doƒüduƒüu yer olan bu ≈üehir, UNESCO D√ºnya Mirasƒ±.' }
             ]
           };
           
           // √úlke adƒ±nƒ± kontrol et ve e≈üle≈ütir
           const countryKey = Object.keys(countryAttractions).find(key => 
             key.toLowerCase() === normalizedCountry.toLowerCase() ||
             translateCountryName(key).toLowerCase() === normalizedCountry.toLowerCase()
           );
           
           if (countryKey) {
             return countryAttractions[countryKey].map(place => ({
               name: place.name,
               city: place.city,
               country: countryName,
               category: place.category,
               description: place.description,
               visited: false
             }));
           }
           
           // Eƒüer √∂zel veritabanƒ±nda yoksa, genel turistik yerler olu≈ütur
           return generateGenericTouristPlaces(countryName);
         }
         
         // √úlke adƒ±nƒ± normalize et
         function normalizeCountryName(countryName) {
           const countryMap = {
             'brazil': 'brezilya', 'brasil': 'brezilya', 'brezilya': 'brezilya',
             'argentina': 'arjantin', 'arjantin': 'arjantin',
             'mexico': 'meksika', 'm√©xico': 'meksika', 'meksika': 'meksika',
             'united states': 'amerika', 'usa': 'amerika', 'amerika': 'amerika',
             'canada': 'kanada', 'kanada': 'kanada',
             'australia': 'avustralya', 'avustralya': 'avustralya',
             'india': 'hindistan', 'hindistan': 'hindistan',
             'russia': 'rusya', 'rusya': 'rusya'
           };
           
           return countryMap[countryName.toLowerCase()] || countryName;
         }
         
         // √úlke adƒ±nƒ± √ßevir
         function translateCountryName(countryKey) {
           const translations = {
             'brezilya': 'brazil',
             'arjantin': 'argentina', 
             'meksika': 'mexico'
           };
           
           return translations[countryKey] || countryKey;
         }
         
         // Genel turistik yerler olu≈ütur
         function generateGenericTouristPlaces(countryName) {
           const genericPlaces = [
             { name: `${countryName} Ulusal M√ºzesi`, category: 'M√ºze', description: `${countryName}'nƒ±n en √∂nemli m√ºzesi. √úlkenin tarihi, k√ºlt√ºr√º ve sanatƒ± hakkƒ±nda kapsamlƒ± bilgi sunar.` },
             { name: `${countryName} Merkez Meydanƒ±`, category: 'Meydan', description: `${countryName}'nƒ±n kalbi olan ana meydan. Tarihi binalar ve √∂nemli anƒ±tlarla √ßevrili.` },
             { name: `${countryName} Sarayƒ±`, category: 'Saray', description: `${countryName}'nƒ±n tarihi sarayƒ±. Kraliyet mimarisi ve muhte≈üem bah√ßeleri ile √ºnl√º.` },
             { name: `${countryName} Katedrali`, category: 'Dini Yapƒ±', description: `${countryName}'nƒ±n en √∂nemli dini yapƒ±sƒ±. Gotik mimarisi ve tarihi √∂nemi ile dikkat √ßeker.` },
             { name: `${countryName} Ulusal Parkƒ±`, category: 'Doƒüal G√ºzellik', description: `${countryName}'nƒ±n en g√ºzel doƒüal alanƒ±. Endemik bitki ve hayvan t√ºrleri barƒ±ndƒ±rƒ±r.` },
             { name: `${countryName} Sanat Galerisi`, category: 'Galeri', description: `${countryName}'nƒ±n en prestijli sanat galerisi. Yerel ve uluslararasƒ± sanat eserlerini sergiler.` },
             { name: `${countryName} Kalesi`, category: 'Kale', description: `${countryName}'nƒ±n tarihi kalesi. Orta√ßaƒü mimarisi ve savunma sistemleri ile √ºnl√º.` },
             { name: `${countryName} Botanik Bah√ßesi`, category: 'Bah√ße', description: `${countryName}'nƒ±n en b√ºy√ºk botanik bah√ßesi. Binlerce bitki t√ºr√º ve huzurlu atmosfer.` },
             { name: `${countryName} Opera Binasƒ±`, category: 'K√ºlt√ºr Merkezi', description: `${countryName}'nƒ±n en prestijli opera binasƒ±. Klasik mimarisi ve m√ºkemmel akustiƒüi ile √ºnl√º.` },
             { name: `${countryName} Tarihi K√∂pr√ºs√º`, category: 'K√∂pr√º', description: `${countryName}'nƒ±n simgesel k√∂pr√ºs√º. M√ºhendislik harikasƒ± olan bu yapƒ±, ≈üehrin √∂nemli ge√ßi≈ü noktasƒ±.` },
             { name: `${countryName} Plajƒ±`, category: 'Plaj', description: `${countryName}'nƒ±n en g√ºzel plajƒ±. Altƒ±n sarƒ±sƒ± kumlarƒ± ve berrak denizi ile tatil cenneti.` },
             { name: `${countryName} Daƒüƒ±`, category: 'Daƒü', description: `${countryName}'nƒ±n en y√ºksek daƒüƒ±. Muhte≈üem manzarasƒ± ve trekking rotalarƒ± ile doƒüa severlerinin g√∂zdesi.` }
           ];
           
           return genericPlaces.slice(0, 10); // ƒ∞lk 10 yeri d√∂nd√ºr
         }
         
         // √úlke yerlerini ekle (en az 10 yer kontrol√º)
         async function addCountryPlaces(user, countryData, countryName) {
           // Dinamik olarak olu≈üturulan veriler i√ßin data array'ini kontrol et
           const places = Array.isArray(countryData.data) ? countryData.data : countryData.data.places || [];
           
           // √úlke i√ßin en az 10 yer kontrol√º
           if (places.length < 10) {
             alert(`${countryName} i√ßin yeterli pop√ºler yer bulunamadƒ± (${places.length} yer mevcut, en az 10 gerekli). Yerler eklenmedi.`);
             return;
           }
           
           // Var olan √ºlke yerlerini kontrol et
           const existingCountryPlaces = await checkExistingCountryPlaces(user, countryName);
           if (existingCountryPlaces.length > 0) {
             alert(`${countryName} i√ßin yerler zaten eklenmi≈ütir. ${existingCountryPlaces.length} yer mevcut.`);
             return;
           }
           
           // ƒ∞lk 15 yeri al (veya mevcut sayƒ± kadar)
           const selectedPlaces = places.slice(0, Math.min(15, places.length));
           
           // Kullanƒ±cƒ±ya i≈ülem durumu bildir
           showStatus(`${countryName} i√ßin ${selectedPlaces.length} turistik yer ekleniyor...`, 'info');
           
           let addedCount = 0;
           for (const place of selectedPlaces) {
             const placeData = {
               name: place.name || 'Unknown Place',
               city: place.city || 'Unknown City',
               country: place.country || countryName || 'Unknown Country',
               category: place.category || 'Turistik Yer',
               description: place.description || '',
               visited: false,
               createdAt: new Date()
             };
             
             // Her bir yerin daha √∂nce eklenip eklenmediƒüini kontrol et
             const placeExists = await checkIfPlaceExists(user, placeData.name, placeData.city);
             if (!placeExists) {
               await addDoc(collection(db, 'users', user.uid, 'places'), placeData);
               addedCount++;
             }
           }
           
           if (addedCount > 0) {
             showStatus(`${countryName} i√ßin ${addedCount} yeni turistik yer ba≈üarƒ±yla eklendi!`, 'success');
           } else {
             showStatus(`${countryName} i√ßin t√ºm yerler zaten mevcut.`, 'info');
           }
           loadPlacesTable(user);
         }
         
         // Var olan ≈üehir yerlerini kontrol et
         async function checkExistingPlaces(user, cityName) {
           const placesRef = collection(db, 'users', user.uid, 'places');
           const q = query(placesRef, where('city', '==', cityName));
           const querySnapshot = await getDocs(q);
           return querySnapshot.docs.map(doc => doc.data());
         }
         
         // Belirli bir yerin daha √∂nce eklenip eklenmediƒüini kontrol et
         async function checkIfPlaceExists(user, placeName, cityName) {
           const placesRef = collection(db, 'users', user.uid, 'places');
           const q = query(placesRef, where('name', '==', placeName), where('city', '==', cityName));
           const querySnapshot = await getDocs(q);
           return querySnapshot.size > 0;
         }
         
         // Var olan √ºlke yerlerini kontrol et
         async function checkExistingCountryPlaces(user, countryName) {
           const placesRef = collection(db, 'users', user.uid, 'places');
           const q = query(placesRef, where('country', '==', countryName.toUpperCase()));
           const querySnapshot = await getDocs(q);
           return querySnapshot.docs.map(doc => doc.data());
         }
         
         // ≈ûehir yerlerini ekle (≈üehirler i√ßin minimum yer kontrol√º yok)
         async function addCityPlaces(user, cityName) {
           try {
             // Var olan yerleri kontrol et
             const existingPlaces = await checkExistingPlaces(user, cityName);
             if (existingPlaces.length > 0) {
               showStatus(`${cityName} i√ßin yerler zaten eklenmi≈ütir. ${existingPlaces.length} yer mevcut.`, 'info');
               return;
             }
             
             // ≈ûehir i√ßin √ºlke tespiti
             const detectedCountry = detectCountryFromCity(cityName);
             
             // ≈ûehir i√ßin yerler olu≈ütur
             const cityPlaces = generateCityPlaces(cityName, detectedCountry);
             
             // ≈ûehirler i√ßin en az 1 yer yeterli
             if (!cityPlaces || cityPlaces.length === 0) {
               showStatus(`${cityName} i√ßin hi√ß pop√ºler yer bulunamadƒ±.`, 'error');
               return;
             }
             
             const countryFilter = document.getElementById('countryFilter');
             
             // √úlke filtresini otomatik ayarla (tespit edildiyse)
             if (detectedCountry && countryFilter) {
               countryFilter.value = detectedCountry;
               // Arka planƒ± da g√ºncelle
               if (window.enhancedBackgroundManager) {
                 window.enhancedBackgroundManager.updateBackgroundForCountry(detectedCountry);
               }
             }
             
             // ƒ∞lk 15 yeri al (veya mevcut sayƒ± kadar)
             const selectedPlaces = cityPlaces.slice(0, Math.min(15, cityPlaces.length));
             
             // Kullanƒ±cƒ±ya i≈ülem durumu bildir
             showStatus(`${cityName} i√ßin ${selectedPlaces.length} turistik yer ekleniyor...`, 'info');
             
             let addedCount = 0;
             for (const place of selectedPlaces) {
               // Her bir yerin daha √∂nce eklenip eklenmediƒüini kontrol et
               const placeExists = await checkIfPlaceExists(user, place.name, place.city);
               if (!placeExists) {
                 await addDoc(collection(db, 'users', user.uid, 'places'), place);
                 addedCount++;
               }
             }
             
             if (addedCount > 0) {
               showStatus(`${cityName} i√ßin ${addedCount} yeni turistik yer ba≈üarƒ±yla eklendi!`, 'success');
             } else {
               showStatus(`${cityName} i√ßin t√ºm yerler zaten mevcut.`, 'info');
             }
             loadPlacesTable(user);
           } catch (error) {
             console.error(`${cityName} ≈üehir yerleri eklenirken hata:`, error);
             showStatus(`${cityName} i√ßin yerler eklenirken hata olu≈ütu: ${error.message}`, 'error');
           }
         }
         
         // ≈ûehirden √ºlke tespiti - D√ºnya √ßapƒ±nda ≈üehirler
         function detectCountryFromCity(cityName) {
           const cityCountryMap = {
             // Almanya ≈üehirleri
             'aachen': 'germany', 'berlin': 'germany', 'm√ºnchen': 'germany', 'hamburg': 'germany', 
             'k√∂ln': 'germany', 'frankfurt': 'germany', 'stuttgart': 'germany', 'd√ºsseldorf': 'germany',
             'dortmund': 'germany', 'essen': 'germany', 'leipzig': 'germany', 'bremen': 'germany',
             'dresden': 'germany', 'hannover': 'germany', 'n√ºrnberg': 'germany', 'duisburg': 'germany',
             'bonn': 'germany', 'bochum': 'germany', 'wuppertal': 'germany', 'bielefeld': 'germany',
             'mannheim': 'germany', 'karlsruhe': 'germany', 'augsburg': 'germany', 'wiesbaden': 'germany',
             'gelsenkirchen': 'germany', 'm√∂nchengladbach': 'germany', 'braunschweig': 'germany',
             'chemnitz': 'germany', 'kiel': 'germany', 'krefeld': 'germany', 'halle': 'germany',
             'magdeburg': 'germany', 'freiburg': 'germany', 'erfurt': 'germany', 'mainz': 'germany',
             'rostock': 'germany', 'kassel': 'germany', 'hagen': 'germany', 'potsdam': 'germany',
             'saarbr√ºcken': 'germany', 'hamm': 'germany', 'm√ºlheim': 'germany', 'ludwigshafen': 'germany',
             'leverkusen': 'germany', 'oldenburg': 'germany', 'osnabr√ºck': 'germany', 'solingen': 'germany',
             'heidelberg': 'germany', 'herne': 'germany', 'neuss': 'germany', 'darmstadt': 'germany',
             'paderborn': 'germany', 'regensburg': 'germany', 'ingolstadt': 'germany', 'w√ºrzburg': 'germany',
             'f√ºrth': 'germany', 'wolfsburg': 'germany', 'offenbach': 'germany', 'ulm': 'germany',
             'heilbronn': 'germany', 'pforzheim': 'germany', 'g√∂ttingen': 'germany', 'bottrop': 'germany',
             'trier': 'germany', 'recklinghausen': 'germany', 'reutlingen': 'germany', 'bremerhaven': 'germany',
             'koblenz': 'germany', 'bergisch gladbach': 'germany', 'jena': 'germany', 'remscheid': 'germany',
             'erlangen': 'germany', 'moers': 'germany', 'siegen': 'germany', 'hildesheim': 'germany',
             'salzgitter': 'germany', 'cottbus': 'germany',
             
             // Fransa ≈üehirleri
             'paris': 'france', 'lyon': 'france', 'marseille': 'france', 'toulouse': 'france',
             'nice': 'france', 'nantes': 'france', 'strasbourg': 'france', 'montpellier': 'france',
             'bordeaux': 'france', 'lille': 'france', 'rennes': 'france', 'reims': 'france',
             'le havre': 'france', 'saint-√©tienne': 'france', 'toulon': 'france', 'angers': 'france',
             'grenoble': 'france', 'dijon': 'france', 'n√Æmes': 'france', 'aix-en-provence': 'france',
             'saint-quentin-en-yvelines': 'france', 'brest': 'france', 'le mans': 'france', 'amiens': 'france',
             'tours': 'france', 'limoges': 'france', 'clermont-ferrand': 'france', 'villeurbanne': 'france',
             'besan√ßon': 'france', 'orl√©ans': 'france', 'metz': 'france', 'rouen': 'france',
             'mulhouse': 'france', 'perpignan': 'france', 'caen': 'france', 'boulogne-billancourt': 'france',
             'nancy': 'france', 'argenteuil': 'france', 'roubaix': 'france', 'tourcoing': 'france',
             'nanterre': 'france', 'avignon': 'france', 'cr√©teil': 'france', 'dunkerque': 'france',
             'poitiers': 'france', 'asni√®res-sur-seine': 'france', 'courbevoie': 'france', 'versailles': 'france',
             'pau': 'france', 'fort-de-france': 'france', 'colombes': 'france', 'aulnay-sous-bois': 'france',
             'saint-maur-des-foss√©s': 'france', 'rueil-malmaison': 'france', 'champigny-sur-marne': 'france',
             'antibes': 'france', 'la rochelle': 'france', 'cannes': 'france',
             
             // ƒ∞talya ≈üehirleri
             'roma': 'italy', 'milano': 'italy', 'napoli': 'italy', 'torino': 'italy',
             'palermo': 'italy', 'genova': 'italy', 'bologna': 'italy', 'firenze': 'italy',
             'bari': 'italy', 'catania': 'italy', 'venezia': 'italy', 'verona': 'italy',
             'messina': 'italy', 'padova': 'italy', 'trieste': 'italy', 'taranto': 'italy',
             'brescia': 'italy', 'prato': 'italy', 'parma': 'italy', 'modena': 'italy',
             'reggio calabria': 'italy', 'reggio emilia': 'italy', 'perugia': 'italy', 'livorno': 'italy',
             'ravenna': 'italy', 'cagliari': 'italy', 'foggia': 'italy', 'rimini': 'italy',
             'salerno': 'italy', 'ferrara': 'italy', 'sassari': 'italy', 'latina': 'italy',
             'giugliano in campania': 'italy', 'monza': 'italy', 'syracuse': 'italy', 'pescara': 'italy',
             'bergamo': 'italy', 'forl√¨': 'italy', 'trento': 'italy', 'vicenza': 'italy',
             'terni': 'italy', 'bolzano': 'italy', 'novara': 'italy', 'piacenza': 'italy',
             'ancona': 'italy', 'andria': 'italy', 'arezzo': 'italy', 'udine': 'italy',
             'cesena': 'italy', 'lecce': 'italy', 'pesaro': 'italy', 'barletta': 'italy',
             'alessandria': 'italy', 'la spezia': 'italy', 'pisa': 'italy', 'catanzaro': 'italy',
             'pistoia': 'italy', 'brindisi': 'italy', 'treviso': 'italy', 'pavia': 'italy',
             
             // ƒ∞spanya ≈üehirleri
             'madrid': 'spain', 'barcelona': 'spain', 'valencia': 'spain', 'sevilla': 'spain',
             'zaragoza': 'spain', 'm√°laga': 'spain', 'murcia': 'spain', 'palma': 'spain',
             'las palmas': 'spain', 'bilbao': 'spain', 'alicante': 'spain', 'c√≥rdoba': 'spain',
             'valladolid': 'spain', 'vigo': 'spain', 'gij√≥n': 'spain', 'hospitalet de llobregat': 'spain',
             'vitoria-gasteiz': 'spain', 'a coru√±a': 'spain', 'elche': 'spain', 'oviedo': 'spain',
             'santa cruz de tenerife': 'spain', 'badalona': 'spain', 'cartagena': 'spain', 'terrassa': 'spain',
             'jerez de la frontera': 'spain', 'sabadell': 'spain', 'm√≥stoles': 'spain', 'alcal√° de henares': 'spain',
             'pamplona': 'spain', 'fuenlabrada': 'spain', 'almer√≠a': 'spain', 'legan√©s': 'spain',
             'donostia-san sebasti√°n': 'spain', 'burgos': 'spain', 'santander': 'spain', 'castell√≥n de la plana': 'spain',
             'alcorc√≥n': 'spain', 'getafe': 'spain', 'salamanca': 'spain', 'huelva': 'spain',
             'logro√±o': 'spain', 'badajoz': 'spain', 'tarragona': 'spain', 'le√≥n': 'spain',
             'c√°diz': 'spain', 'lleida': 'spain', 'marbella': 'spain', 'dos hermanas': 'spain',
             'mataro': 'spain', 'torrej√≥n de ardoz': 'spain', 'parla': 'spain', 'alcobendas': 'spain',
             
             // ƒ∞ngiltere ≈üehirleri
             'london': 'united kingdom', 'birmingham': 'united kingdom', 'manchester': 'united kingdom', 'glasgow': 'united kingdom',
             'liverpool': 'united kingdom', 'leeds': 'united kingdom', 'sheffield': 'united kingdom', 'edinburgh': 'united kingdom',
             'bristol': 'united kingdom', 'cardiff': 'united kingdom', 'leicester': 'united kingdom', 'coventry': 'united kingdom',
             'bradford': 'united kingdom', 'belfast': 'united kingdom', 'nottingham': 'united kingdom', 'kingston upon hull': 'united kingdom',
             'newcastle upon tyne': 'united kingdom', 'stoke-on-trent': 'united kingdom', 'southampton': 'united kingdom', 'derby': 'united kingdom',
             'portsmouth': 'united kingdom', 'brighton': 'united kingdom', 'plymouth': 'united kingdom', 'northampton': 'united kingdom',
             'reading': 'united kingdom', 'luton': 'united kingdom', 'wolverhampton': 'united kingdom', 'bolton': 'united kingdom',
             'bournemouth': 'united kingdom', 'norwich': 'united kingdom', 'swindon': 'united kingdom', 'swansea': 'united kingdom',
             'southend-on-sea': 'united kingdom', 'middlesbrough': 'united kingdom', 'milton keynes': 'united kingdom', 'sunderland': 'united kingdom',
             'warrington': 'united kingdom', 'huddersfield': 'united kingdom', 'peterborough': 'united kingdom', 'york': 'united kingdom',
             'stockport': 'united kingdom', 'west bromwich': 'united kingdom', 'oldham': 'united kingdom', 'exeter': 'united kingdom',
             'gloucester': 'united kingdom', 'blackpool': 'united kingdom', 'preston': 'united kingdom', 'sutton coldfield': 'united kingdom',
             
             // ABD ≈üehirleri
             'new york': 'united states', 'los angeles': 'united states', 'chicago': 'united states', 'houston': 'united states',
             'phoenix': 'united states', 'philadelphia': 'united states', 'san antonio': 'united states', 'san diego': 'united states',
             'dallas': 'united states', 'san jose': 'united states', 'austin': 'united states', 'jacksonville': 'united states',
             'fort worth': 'united states', 'columbus': 'united states', 'charlotte': 'united states', 'san francisco': 'united states',
             'indianapolis': 'united states', 'seattle': 'united states', 'denver': 'united states', 'washington': 'united states',
             'boston': 'united states', 'el paso': 'united states', 'detroit': 'united states', 'nashville': 'united states',
             'portland': 'united states', 'memphis': 'united states', 'oklahoma city': 'united states', 'las vegas': 'united states',
             'louisville': 'united states', 'baltimore': 'united states', 'milwaukee': 'united states', 'albuquerque': 'united states',
             'tucson': 'united states', 'fresno': 'united states', 'mesa': 'united states', 'sacramento': 'united states',
             'atlanta': 'united states', 'kansas city': 'united states', 'colorado springs': 'united states', 'miami': 'united states',
             'raleigh': 'united states', 'omaha': 'united states', 'long beach': 'united states', 'virginia beach': 'united states',
             'oakland': 'united states', 'minneapolis': 'united states', 'tulsa': 'united states', 'arlington': 'united states',
             'tampa': 'united states', 'new orleans': 'united states', 'wichita': 'united states', 'cleveland': 'united states',
             
             // Kanada ≈üehirleri
             'toronto': 'canada', 'montreal': 'canada', 'vancouver': 'canada', 'calgary': 'canada',
             'edmonton': 'canada', 'ottawa': 'canada', 'winnipeg': 'canada', 'quebec city': 'canada',
             'hamilton': 'canada', 'kitchener': 'canada', 'london': 'canada', 'victoria': 'canada',
             'halifax': 'canada', 'oshawa': 'canada', 'windsor': 'canada', 'saskatoon': 'canada',
             'st. catharines': 'canada', 'regina': 'canada', 'sherbrooke': 'canada', 'kelowna': 'canada',
             'barrie': 'canada', 'abbotsford': 'canada', 'kingston': 'canada', 'sudbury': 'canada',
             'trois-rivi√®res': 'canada', 'guelph': 'canada', 'cambridge': 'canada', 'whitby': 'canada',
             'thunder bay': 'canada', 'chatham': 'canada', 'red deer': 'canada', 'lethbridge': 'canada',
             'kamloops': 'canada', 'brantford': 'canada', 'nanaimo': 'canada', 'moncton': 'canada',
             'sarnia': 'canada', 'sault ste. marie': 'canada', 'medicine hat': 'canada', 'north bay': 'canada',
             'prince george': 'canada', 'fredericton': 'canada', 'saint john': 'canada', 'fort mcmurray': 'canada',
             
             // Avustralya ≈üehirleri
             'sydney': 'australia', 'melbourne': 'australia', 'brisbane': 'australia', 'perth': 'australia',
             'adelaide': 'australia', 'gold coast': 'australia', 'newcastle': 'australia', 'canberra': 'australia',
             'sunshine coast': 'australia', 'wollongong': 'australia', 'hobart': 'australia', 'geelong': 'australia',
             'townsville': 'australia', 'cairns': 'australia', 'darwin': 'australia', 'toowoomba': 'australia',
             'ballarat': 'australia', 'bendigo': 'australia', 'albury': 'australia', 'launceston': 'australia',
             'mackay': 'australia', 'rockhampton': 'australia', 'bunbury': 'australia', 'bundaberg': 'australia',
             'coffs harbour': 'australia', 'wagga wagga': 'australia', 'hervey bay': 'australia', 'mildura': 'australia',
             'shepparton': 'australia', 'port macquarie': 'australia', 'gladstone': 'australia', 'tamworth': 'australia',
             'traralgon': 'australia', 'orange': 'australia', 'dubbo': 'australia', 'geraldton': 'australia',
             'bowral': 'australia', 'bathurst': 'australia', 'nowra': 'australia', 'warrnambool': 'australia',
             
             // Japonya ≈üehirleri
             'tokyo': 'japan', 'yokohama': 'japan', 'osaka': 'japan', 'nagoya': 'japan',
             'sapporo': 'japan', 'fukuoka': 'japan', 'kobe': 'japan', 'kawasaki': 'japan',
             'kyoto': 'japan', 'saitama': 'japan', 'hiroshima': 'japan', 'sendai': 'japan',
             'kitakyushu': 'japan', 'chiba': 'japan', 'sakai': 'japan', 'niigata': 'japan',
             'hamamatsu': 'japan', 'okayama': 'japan', 'sagamihara': 'japan', 'shizuoka': 'japan',
             'kumamoto': 'japan', 'kagoshima': 'japan', 'matsuyama': 'japan', 'kanazawa': 'japan',
             'utsunomiya': 'japan', 'matsudo': 'japan', 'kawaguchi': 'japan', 'takatsuki': 'japan',
             'toyama': 'japan', 'toyota': 'japan', 'takamatsu': 'japan', 'machida': 'japan',
             'gifu': 'japan', 'fujisawa': 'japan', 'kashiwa': 'japan', 'toyonaka': 'japan',
             'nagano': 'japan', 'iwaki': 'japan', 'asahikawa': 'japan', 'okazaki': 'japan',
             'miyazaki': 'japan', 'nara': 'japan', 'suita': 'japan', 'wakayama': 'japan',
             
             // G√ºney Kore ≈üehirleri
             'seoul': 'south korea', 'busan': 'south korea', 'incheon': 'south korea', 'daegu': 'south korea',
             'daejeon': 'south korea', 'gwangju': 'south korea', 'suwon': 'south korea', 'ulsan': 'south korea',
             'changwon': 'south korea', 'goyang': 'south korea', 'yongin': 'south korea', 'seongnam': 'south korea',
             'bucheon': 'south korea', 'ansan': 'south korea', 'cheongju': 'south korea', 'jeonju': 'south korea',
             'anyang': 'south korea', 'cheonan': 'south korea', 'namyangju': 'south korea', 'pohang': 'south korea',
             'uijeongbu': 'south korea', 'siheung': 'south korea', 'paju': 'south korea', 'gimhae': 'south korea',
             'pyeongtaek': 'south korea', 'jinju': 'south korea', 'yangju': 'south korea', 'icheon': 'south korea',
             'gunpo': 'south korea', 'osan': 'south korea', 'gwangmyeong': 'south korea', 'jeju': 'south korea',
             'hanam': 'south korea', 'gimpo': 'south korea', 'guri': 'south korea', 'mokpo': 'south korea',
             'wonju': 'south korea', 'sacheon': 'south korea', 'yangsan': 'south korea', 'gwangyang': 'south korea',
             
             // √áin ≈üehirleri
             'beijing': 'china', 'shanghai': 'china', 'guangzhou': 'china', 'shenzhen': 'china',
             'tianjin': 'china', 'wuhan': 'china', 'dongguan': 'china', 'chengdu': 'china',
             'nanjing': 'china', 'chongqing': 'china', 'xian': 'china', 'shenyang': 'china',
             'hangzhou': 'china', 'dalian': 'china', 'qingdao': 'china', 'jinan': 'china',
             'harbin': 'china', 'zhengzhou': 'china', 'shantou': 'china', 'foshan': 'china',
             'changchun': 'china', 'shijiazhuang': 'china', 'kunming': 'china', 'changsha': 'china',
             'hefei': 'china', 'urumqi': 'china', 'suzhou': 'china', 'wuxi': 'china',
             'ningbo': 'china', 'lanzhou': 'china', 'xuzhou': 'china', 'wenzhou': 'china',
             'nanning': 'china', 'guiyang': 'china', 'taiyuan': 'china', 'nanchang': 'china',
             'zibo': 'china', 'yantai': 'china', 'huizhou': 'china', 'weifang': 'china',
             'handan': 'china', 'zhuhai': 'china', 'baotou': 'china', 'tangshan': 'china',
             
             // Hindistan ≈üehirleri
             'mumbai': 'india', 'delhi': 'india', 'bangalore': 'india', 'hyderabad': 'india',
             'ahmedabad': 'india', 'chennai': 'india', 'kolkata': 'india', 'surat': 'india',
             'pune': 'india', 'jaipur': 'india', 'lucknow': 'india', 'kanpur': 'india',
             'nagpur': 'india', 'indore': 'india', 'thane': 'india', 'bhopal': 'india',
             'visakhapatnam': 'india', 'pimpri-chinchwad': 'india', 'patna': 'india', 'vadodara': 'india',
             'ghaziabad': 'india', 'ludhiana': 'india', 'agra': 'india', 'nashik': 'india',
             'faridabad': 'india', 'meerut': 'india', 'rajkot': 'india', 'kalyan-dombivli': 'india',
             'vasai-virar': 'india', 'varanasi': 'india', 'srinagar': 'india', 'aurangabad': 'india',
             'dhanbad': 'india', 'amritsar': 'india', 'navi mumbai': 'india', 'allahabad': 'india',
             'ranchi': 'india', 'howrah': 'india', 'coimbatore': 'india', 'jabalpur': 'india',
             'gwalior': 'india', 'vijayawada': 'india', 'jodhpur': 'india', 'madurai': 'india',
             
             // Brezilya ≈üehirleri
             's√£o paulo': 'brazil', 'rio de janeiro': 'brazil', 'bras√≠lia': 'brazil', 'salvador': 'brazil',
             'fortaleza': 'brazil', 'belo horizonte': 'brazil', 'manaus': 'brazil', 'curitiba': 'brazil',
             'recife': 'brazil', 'goi√¢nia': 'brazil', 'bel√©m': 'brazil', 'porto alegre': 'brazil',
             'guarulhos': 'brazil', 'campinas': 'brazil', 's√£o lu√≠s': 'brazil', 's√£o gon√ßalo': 'brazil',
             'macei√≥': 'brazil', 'duque de caxias': 'brazil', 'natal': 'brazil', 'teresina': 'brazil',
             'campo grande': 'brazil', 'nova igua√ßu': 'brazil', 's√£o bernardo do campo': 'brazil', 'jo√£o pessoa': 'brazil',
             'santo andr√©': 'brazil', 'osasco': 'brazil', 'jaboat√£o dos guararapes': 'brazil', 's√£o jos√© dos campos': 'brazil',
             'ribeir√£o preto': 'brazil', 'uberl√¢ndia': 'brazil', 'sorocaba': 'brazil', 'contagem': 'brazil',
             'aracaju': 'brazil', 'feira de santana': 'brazil', 'cuiab√°': 'brazil', 'joinville': 'brazil',
             'aparecida de goi√¢nia': 'brazil', 'londrina': 'brazil', 'juiz de fora': 'brazil', 'ananindeua': 'brazil',
             
             // Rusya ≈üehirleri
             'moscow': 'russia', 'saint petersburg': 'russia', 'novosibirsk': 'russia', 'yekaterinburg': 'russia',
             'nizhny novgorod': 'russia', 'kazan': 'russia', 'chelyabinsk': 'russia', 'omsk': 'russia',
             'samara': 'russia', 'rostov-on-don': 'russia', 'ufa': 'russia', 'krasnoyarsk': 'russia',
             'perm': 'russia', 'voronezh': 'russia', 'volgograd': 'russia', 'krasnodar': 'russia',
             'saratov': 'russia', 'tyumen': 'russia', 'tolyatti': 'russia', 'izhevsk': 'russia',
             'barnaul': 'russia', 'ulyanovsk': 'russia', 'irkutsk': 'russia', 'vladivostok': 'russia',
             'yaroslavl': 'russia', 'habarovsk': 'russia', 'makhachkala': 'russia', 'tomsk': 'russia',
             'orenburg': 'russia', 'kemerovo': 'russia', 'ryazan': 'russia', 'astrakhan': 'russia',
             'naberezhnye chelny': 'russia', 'penza': 'russia', 'lipetsk': 'russia', 'tula': 'russia',
             'kirov': 'russia', 'cheboksary': 'russia', 'kaliningrad': 'russia', 'bryansk': 'russia',
             
             // Meksika ≈üehirleri
             'mexico city': 'mexico', 'guadalajara': 'mexico', 'monterrey': 'mexico', 'puebla': 'mexico',
             'tijuana': 'mexico', 'le√≥n': 'mexico', 'ju√°rez': 'mexico', 'torre√≥n': 'mexico',
             'quer√©taro': 'mexico', 'san luis potos√≠': 'mexico', 'm√©rida': 'mexico', 'mexicali': 'mexico',
             'aguascalientes': 'mexico', 'cuernavaca': 'mexico', 'saltillo': 'mexico', 'hermosillo': 'mexico',
             'canc√∫n': 'mexico', 'durango': 'mexico', 'xalapa': 'mexico', 'toluca': 'mexico',
             'reynosa': 'mexico', 'chihuahua': 'mexico', 'morelia': 'mexico', 'tampico': 'mexico',
             'culiac√°n': 'mexico', 'acapulco': 'mexico', 'chimalhuac√°n': 'mexico', 'tlalnepantla': 'mexico',
             'veracruz': 'mexico', 'pachuca': 'mexico', 'oaxaca': 'mexico', 'tuxtla guti√©rrez': 'mexico',
             'mazatl√°n': 'mexico', 'irapuato': 'mexico', 'nuevo laredo': 'mexico', 'villahermosa': 'mexico',
             
             // Arjantin ≈üehirleri
             'buenos aires': 'argentina', 'c√≥rdoba': 'argentina', 'rosario': 'argentina', 'mendoza': 'argentina',
             'tucum√°n': 'argentina', 'la plata': 'argentina', 'mar del plata': 'argentina', 'salta': 'argentina',
             'santa fe': 'argentina', 'san juan': 'argentina', 'resistencia': 'argentina', 'santiago del estero': 'argentina',
             'corrientes': 'argentina', 'posadas': 'argentina', 'neuqu√©n': 'argentina', 'bah√≠a blanca': 'argentina',
             'paran√°': 'argentina', 'formosa': 'argentina', 'san luis': 'argentina', 'la rioja': 'argentina',
             'catamarca': 'argentina', 'r√≠o cuarto': 'argentina', 'comodoro rivadavia': 'argentina', 'concordia': 'argentina',
             'san rafael': 'argentina', 'tandil': 'argentina', 'san nicol√°s': 'argentina', 'r√≠o gallegos': 'argentina',
             'ushuaia': 'argentina', 'san salvador de jujuy': 'argentina', 'pergamino': 'argentina', 'z√°rate': 'argentina',
             'campana': 'argentina', 'venado tuerto': 'argentina', 'jun√≠n': 'argentina', 'olavarr√≠a': 'argentina',
             
             // T√ºrkiye ≈üehirleri
             'istanbul': 'turkey', 'ankara': 'turkey', 'izmir': 'turkey', 'bursa': 'turkey',
             'antalya': 'turkey', 'adana': 'turkey', 'konya': 'turkey', '≈üanlƒ±urfa': 'turkey',
             'gaziantep': 'turkey', 'kayseri': 'turkey', 'mersin': 'turkey', 'eski≈üehir': 'turkey',
             'diyarbakƒ±r': 'turkey', 'samsun': 'turkey', 'denizli': 'turkey', 'adapazarƒ±': 'turkey',
             'malatya': 'turkey', 'kahramanmara≈ü': 'turkey', 'erzurum': 'turkey', 'van': 'turkey',
             'batman': 'turkey', 'elazƒ±ƒü': 'turkey', 'iƒüdƒ±r': 'turkey', 'tokat': 'turkey',
             'sivas': 'turkey', 'gebze': 'turkey', 'kocaeli': 'turkey', 'manisa': 'turkey',
             'balƒ±kesir': 'turkey', 'aydƒ±n': 'turkey', 'tekirdaƒü': 'turkey', '√ßorum': 'turkey',
             'kƒ±rƒ±kkale': 'turkey', 'afyon': 'turkey', 'isparta': 'turkey', 'zonguldak': 'turkey',
             'u≈üak': 'turkey', 'd√ºzce': 'turkey', 'osmaniye': 'turkey', 'kƒ±r≈üehir': 'turkey',
             
             // Hollanda ≈üehirleri
             'amsterdam': 'netherlands', 'rotterdam': 'netherlands', 'the hague': 'netherlands', 'utrecht': 'netherlands',
             'eindhoven': 'netherlands', 'tilburg': 'netherlands', 'groningen': 'netherlands', 'almere': 'netherlands',
             'breda': 'netherlands', 'nijmegen': 'netherlands', 'enschede': 'netherlands', 'haarlem': 'netherlands',
             'arnhem': 'netherlands', 'zaanstad': 'netherlands', 'amersfoort': 'netherlands', 'apeldoorn': 'netherlands',
             's-hertogenbosch': 'netherlands', 'hoofddorp': 'netherlands', 'maastricht': 'netherlands', 'leiden': 'netherlands',
             'dordrecht': 'netherlands', 'zoetermeer': 'netherlands', 'zwolle': 'netherlands', 'deventer': 'netherlands',
             'delft': 'netherlands', 'alkmaar': 'netherlands', 'leeuwarden': 'netherlands', 'sittard-geleen': 'netherlands',
             'venlo': 'netherlands', 'hilversum': 'netherlands', 'hengelo': 'netherlands', 'purmerend': 'netherlands',
             'roosendaal': 'netherlands', 'schiedam': 'netherlands', 'spijkenisse': 'netherlands', 'ede': 'netherlands',
             
             // Bel√ßika ≈üehirleri
             'brussels': 'belgium', 'antwerp': 'belgium', 'ghent': 'belgium', 'charleroi': 'belgium',
             'li√®ge': 'belgium', 'bruges': 'belgium', 'namur': 'belgium', 'leuven': 'belgium',
             'mons': 'belgium', 'aalst': 'belgium', 'mechelen': 'belgium', 'la louvi√®re': 'belgium',
             'kortrijk': 'belgium', 'hasselt': 'belgium', 'sint-niklaas': 'belgium', 'ostend': 'belgium',
             'genk': 'belgium', 'seraing': 'belgium', 'roeselare': 'belgium', 'verviers': 'belgium',
             'mouscron': 'belgium', 'beveren': 'belgium', 'dendermonde': 'belgium', 'beringen': 'belgium',
             'turnhout': 'belgium', 'vilvoorde': 'belgium', 'lokeren': 'belgium', 'sint-truiden': 'belgium',
             'herstal': 'belgium', 'brasschaat': 'belgium', 'waregem': 'belgium', 'grimbergen': 'belgium',
             
             // ƒ∞svi√ßre ≈üehirleri
             'zurich': 'switzerland', 'geneva': 'switzerland', 'basel': 'switzerland', 'bern': 'switzerland',
             'lausanne': 'switzerland', 'winterthur': 'switzerland', 'lucerne': 'switzerland', 'st. gallen': 'switzerland',
             'lugano': 'switzerland', 'biel/bienne': 'switzerland', 'thun': 'switzerland', 'k√∂niz': 'switzerland',
             'la chaux-de-fonds': 'switzerland', 'schaffhausen': 'switzerland', 'fribourg': 'switzerland', 'vernier': 'switzerland',
             'chur': 'switzerland', 'neuch√¢tel': 'switzerland', 'uster': 'switzerland', 'sion': 'switzerland',
             'emmen': 'switzerland', 'zug': 'switzerland', 'yverdon-les-bains': 'switzerland', 'd√ºbendorf': 'switzerland',
             'dietikon': 'switzerland', 'montreux': 'switzerland', 'frauenfeld': 'switzerland', 'wetzikon': 'switzerland',
             'baar': 'switzerland', 'rapperswil-jona': 'switzerland', 'carouge': 'switzerland', 'riehen': 'switzerland',
             
             // Avusturya ≈üehirleri
             'vienna': 'austria', 'graz': 'austria', 'linz': 'austria', 'salzburg': 'austria',
             'innsbruck': 'austria', 'klagenfurt': 'austria', 'villach': 'austria', 'wels': 'austria',
             'sankt p√∂lten': 'austria', 'dornbirn': 'austria', 'steyr': 'austria', 'wiener neustadt': 'austria',
             'feldkirch': 'austria', 'bregenz': 'austria', 'leonding': 'austria', 'klosterneuburg': 'austria',
             'baden': 'austria', 'wolfsberg': 'austria', 'leoben': 'austria', 'krems': 'austria',
             'traun': 'austria', 'amstetten': 'austria', 'kapfenberg': 'austria', 'm√∂dling': 'austria',
             'hallein': 'austria', 'kufstein': 'austria', 'traiskirchen': 'austria', 'schwechat': 'austria',
             'braunau am inn': 'austria', 'stockerau': 'austria', 'saalfelden': 'austria', 'ansfelden': 'austria',
             
             // Portekiz ≈üehirleri
             'lisbon': 'portugal', 'porto': 'portugal', 'amadora': 'portugal', 'braga': 'portugal',
             'set√∫bal': 'portugal', 'coimbra': 'portugal', 'funchal': 'portugal', 'almada': 'portugal',
             'agualva-cac√©m': 'portugal', 'queluz': 'portugal', 'aveiro': 'portugal', '√©vora': 'portugal',
             'rio maior': 'portugal', 'odivelas': 'portugal', 'loures': 'portugal', 'matosinhos': 'portugal',
             'gondomar': 'portugal', 'vila nova de gaia': 'portugal', 'viseu': 'portugal', 'guimar√£es': 'portugal',
             'leiria': 'portugal', 'faro': 'portugal', 'santar√©m': 'portugal', 'barreiro': 'portugal',
             'montijo': 'portugal', 'sintra': 'portugal', 'cascais': 'portugal', 'vila franca de xira': 'portugal',
             'esposende': 'portugal', 'p√≥voa de varzim': 'portugal', 'torres vedras': 'portugal', 'paredes': 'portugal',
             
             // Yunanistan ≈üehirleri
             'athens': 'greece', 'thessaloniki': 'greece', 'patras': 'greece', 'heraklion': 'greece',
             'larissa': 'greece', 'volos': 'greece', 'rhodes': 'greece', 'ioannina': 'greece',
             'chania': 'greece', 'chalcis': 'greece', 'serres': 'greece', 'alexandroupoli': 'greece',
             'xanthi': 'greece', 'katerini': 'greece', 'trikala': 'greece', 'lamia': 'greece',
             'kavala': 'greece', 'kalamata': 'greece', 'veria': 'greece', 'corfu': 'greece',
             'drama': 'greece', 'tripoli': 'greece', 'kozani': 'greece', 'agrinio': 'greece',
             'giannitsa': 'greece', 'preveza': 'greece', 'karditsa': 'greece', 'rethymno': 'greece',
             'mytilene': 'greece', 'chios': 'greece', 'pyrgos': 'greece', 'aigio': 'greece',
             
             // Polonya ≈üehirleri
             'warsaw': 'poland', 'krak√≥w': 'poland', '≈Ç√≥d≈∫': 'poland', 'wroc≈Çaw': 'poland',
             'pozna≈Ñ': 'poland', 'gda≈Ñsk': 'poland', 'szczecin': 'poland', 'bydgoszcz': 'poland',
             'lublin': 'poland', 'katowice': 'poland', 'bia≈Çystok': 'poland', 'gdynia': 'poland',
             'czƒôstochowa': 'poland', 'radom': 'poland', 'sosnowiec': 'poland', 'toru≈Ñ': 'poland',
             'kielce': 'poland', 'gliwice': 'poland', 'zabrze': 'poland', 'bytom': 'poland',
             'olsztyn': 'poland', 'bielsko-bia≈Ça': 'poland', 'rzesz√≥w': 'poland', 'ruda ≈õlƒÖska': 'poland',
             'rybnik': 'poland', 'tychy': 'poland', 'dƒÖbrowa g√≥rnicza': 'poland', 'p≈Çock': 'poland',
             'elblƒÖg': 'poland', 'opole': 'poland', 'gorz√≥w wielkopolski': 'poland', 'wa≈Çbrzych': 'poland',
             
             // √áek Cumhuriyeti ≈üehirleri
             'prague': 'czech republic', 'brno': 'czech republic', 'ostrava': 'czech republic', 'plzen': 'czech republic',
             'liberec': 'czech republic', 'olomouc': 'czech republic', 'ƒçesk√© budƒõjovice': 'czech republic', 'hradec kr√°lov√©': 'czech republic',
             '√∫st√≠ nad labem': 'czech republic', 'pardubice': 'czech republic', 'zl√≠n': 'czech republic', 'hav√≠≈ôov': 'czech republic',
             'kladno': 'czech republic', 'most': 'czech republic', 'opava': 'czech republic', 'fr√Ωdek-m√≠stek': 'czech republic',
             'karvin√°': 'czech republic', 'jihlava': 'czech republic', 'teplice': 'czech republic', 'dƒõƒç√≠n': 'czech republic',
             'karlovy vary': 'czech republic', 'jablonec nad nisou': 'czech republic', 'mlad√° boleslav': 'czech republic', 'prostƒõjov': 'czech republic',
             'p≈ôerov': 'czech republic', 'ƒçesk√° l√≠pa': 'czech republic', 't≈ôeb√≠ƒç': 'czech republic', 't√°bor': 'czech republic',
             'znojmo': 'czech republic', 'p≈ô√≠bram': 'czech republic', 'cheb': 'czech republic', 'trutnov': 'czech republic',
             
             // Macaristan ≈üehirleri
             'budapest': 'hungary', 'debrecen': 'hungary', 'szeged': 'hungary', 'miskolc': 'hungary',
             'p√©cs': 'hungary', 'gy≈ër': 'hungary', 'ny√≠regyh√°za': 'hungary', 'kecskem√©t': 'hungary',
             'sz√©kesfeh√©rv√°r': 'hungary', 'szombathely': 'hungary', 'szolnok': 'hungary', 'tatab√°nya': 'hungary',
             'kaposv√°r': 'hungary', 'b√©k√©scsaba': 'hungary', '√©rd': 'hungary', 'zalaegerszeg': 'hungary',
             'sopron': 'hungary', 'eger': 'hungary', 'nagykanizsa': 'hungary', 'dunakeszi': 'hungary',
             'h√≥dmez≈ëv√°s√°rhely': 'hungary', 'szeksz√°rd': 'hungary', 'moh√°cs': 'hungary', 't√∂r√∂kszentmikl√≥s': 'hungary',
             'cegl√©d': 'hungary', 'orosh√°za': 'hungary', 'salg√≥tarj√°n': 'hungary', 'p√°pa': 'hungary',
             'hajd√∫b√∂sz√∂rm√©ny': 'hungary', 'v√°c': 'hungary', 'gyula': 'hungary', 'kom√°rom': 'hungary',
             
             // Romanya ≈üehirleri
             'bucharest': 'romania', 'cluj-napoca': 'romania', 'timi»ôoara': 'romania', 'ia»ôi': 'romania',
             'constan»õa': 'romania', 'craiova': 'romania', 'bra»ôov': 'romania', 'gala»õi': 'romania',
             'ploie»ôti': 'romania', 'oradea': 'romania', 'brƒÉila': 'romania', 'arad': 'romania',
             'pite»ôti': 'romania', 'sibiu': 'romania', 'bacƒÉu': 'romania', 't√¢rgu mure»ô': 'romania',
             'baia mare': 'romania', 'buzƒÉu': 'romania', 'boto»ôani': 'romania', 'satu mare': 'romania',
             'r√¢mnicu v√¢lcea': 'romania', 'drobeta-turnu severin': 'romania', 'suceava': 'romania', 'piatra neam»õ': 'romania',
             't√¢rgu jiu': 'romania', 'tulcea': 'romania', 'foc»ôani': 'romania', 'bistri»õa': 'romania',
             're»ôi»õa': 'romania', 'alba iulia': 'romania', 'slatina': 'romania', 'c√¢mpulung': 'romania',
             
             // Bulgaristan ≈üehirleri
             'sofia': 'bulgaria', 'plovdiv': 'bulgaria', 'varna': 'bulgaria', 'burgas': 'bulgaria',
             'ruse': 'bulgaria', 'stara zagora': 'bulgaria', 'pleven': 'bulgaria', 'sliven': 'bulgaria',
             'dobrich': 'bulgaria', 'shumen': 'bulgaria', 'pernik': 'bulgaria', 'haskovo': 'bulgaria',
             'yambol': 'bulgaria', 'pazardzhik': 'bulgaria', 'blagoevgrad': 'bulgaria', 'veliko tarnovo': 'bulgaria',
             'vratsa': 'bulgaria', 'gabrovo': 'bulgaria', 'asenovgrad': 'bulgaria', 'vidin': 'bulgaria',
             'kazanlak': 'bulgaria', 'kyustendil': 'bulgaria', 'kardzhali': 'bulgaria', 'montana': 'bulgaria',
             'dimitrovgrad': 'bulgaria', 'targovishte': 'bulgaria', 'lovech': 'bulgaria', 'silistra': 'bulgaria',
             'dupnitsa': 'bulgaria', 'svishtov': 'bulgaria', 'velingrad': 'bulgaria', 'gorna oryahovitsa': 'bulgaria',
             
             // Hƒ±rvatistan ≈üehirleri
             'zagreb': 'croatia', 'split': 'croatia', 'rijeka': 'croatia', 'osijek': 'croatia',
             'zadar': 'croatia', 'pula': 'croatia', 'slavonski brod': 'croatia', 'karlovac': 'croatia',
             'vara≈ædin': 'croatia', '≈°ibenik': 'croatia', 'sisak': 'croatia', 'velika gorica': 'croatia',
             'vukovar': 'croatia', 'dubrovnik': 'croatia', 'bjelovar': 'croatia', 'koprivnica': 'croatia',
             'po≈æega': 'croatia', 'zapre≈°iƒá': 'croatia', 'solin': 'croatia', 'cakovec': 'croatia',
             'vinkovci': 'croatia', 'nova gradi≈°ka': 'croatia', 'trogir': 'croatia', 'krapina': 'croatia',
             'samobor': 'croatia', 'kri≈æevci': 'croatia', 'makarska': 'croatia', 'ƒçakovec': 'croatia',
             'gospiƒá': 'croatia', 'ƒëakovo': 'croatia', 'imotski': 'croatia', 'metkoviƒá': 'croatia',
             
             // Slovakya ≈üehirleri
             'bratislava': 'slovakia', 'ko≈°ice': 'slovakia', 'pre≈°ov': 'slovakia', '≈æilina': 'slovakia',
             'bansk√° bystrica': 'slovakia', 'nitra': 'slovakia', 'trnava': 'slovakia', 'martin': 'slovakia',
             'trenƒç√≠n': 'slovakia', 'poprad': 'slovakia', 'prievidza': 'slovakia', 'zvolen': 'slovakia',
             'pova≈æsk√° bystrica': 'slovakia', 'michalovce': 'slovakia', 'spi≈°sk√° nov√° ves': 'slovakia', 'kom√°rno': 'slovakia',
             'levice': 'slovakia', 'bardejov': 'slovakia', 'liptovsk√Ω mikul√°≈°': 'slovakia', 'ru≈æomberok': 'slovakia',
             'doln√Ω kub√≠n': 'slovakia', 'rimavsk√° sobota': 'slovakia', 'topoƒæƒçany': 'slovakia', 'galanta': 'slovakia',
             'dunajsk√° streda': 'slovakia', 'brezno': 'slovakia', 'senica': 'slovakia', 'snina': 'slovakia',
             'luƒçenec': 'slovakia', 'trebi≈°ov': 'slovakia', 'malacky': 'slovakia', 'ro≈æ≈àava': 'slovakia',
             
             // Slovenya ≈üehirleri
             'ljubljana': 'slovenia', 'maribor': 'slovenia', 'celje': 'slovenia', 'kranj': 'slovenia',
             'velenje': 'slovenia', 'koper': 'slovenia', 'novo mesto': 'slovenia', 'ptuj': 'slovenia',
             'trbovlje': 'slovenia', 'kamnik': 'slovenia', 'jesenice': 'slovenia', 'nova gorica': 'slovenia',
             'dom≈æale': 'slovenia', '≈°kofja loka': 'slovenia', 'murska sobota': 'slovenia', 'slovenj gradec': 'slovenia',
             'kr≈°ko': 'slovenia', 'postojna': 'slovenia', 'litija': 'slovenia', 'radovljica': 'slovenia',
             'idrija': 'slovenia', 'grosuplje': 'slovenia', 'izola': 'slovenia', 'logatec': 'slovenia',
             'vrhnika': 'slovenia', 'tolmin': 'slovenia', 'sevnica': 'slovenia', 'ajdov≈°ƒçina': 'slovenia',
             'bled': 'slovenia', 'piran': 'slovenia', 'bovec': 'slovenia', 'bohinj': 'slovenia',
             
             // Estonya ≈üehirleri
             'tallinn': 'estonia', 'tartu': 'estonia', 'narva': 'estonia', 'p√§rnu': 'estonia',
             'kohtla-j√§rve': 'estonia', 'viljandi': 'estonia', 'rakvere': 'estonia', 'maardu': 'estonia',
             'sillam√§e': 'estonia', 'kuressaare': 'estonia', 'v√µru': 'estonia', 'valga': 'estonia',
             'haapsalu': 'estonia', 'j√µhvi': 'estonia', 'paide': 'estonia', 'keila': 'estonia',
             'saue': 'estonia', 'elva': 'estonia', 'tapa': 'estonia', 'p√µlva': 'estonia',
             'j√µgeva': 'estonia', 'kivi√µli': 'estonia', 'rapla': 'estonia', 'k√§rdla': 'estonia',
             't√ºri': 'estonia', 'loksa': 'estonia', 'otep√§√§': 'estonia', 'p√µltsamaa': 'estonia',
             'kehra': 'estonia', 'paldiski': 'estonia', 't√µrva': 'estonia', 'kunda': 'estonia',
             
             // Letonya ≈üehirleri
             'riga': 'latvia', 'daugavpils': 'latvia', 'liepƒÅja': 'latvia', 'jelgava': 'latvia',
             'j≈´rmala': 'latvia', 'ventspils': 'latvia', 'rƒìzekne': 'latvia', 'valmiera': 'latvia',
             'jƒìkabpils': 'latvia', 'ogre': 'latvia', 'tukums': 'latvia', 'salaspils': 'latvia',
             'cƒìsis': 'latvia', 'kuldƒ´ga': 'latvia', 'saldus': 'latvia', 'talsi': 'latvia',
             'dobele': 'latvia', 'krƒÅslava': 'latvia', 'bauska': 'latvia', 'sigulda': 'latvia',
             'madona': 'latvia', 'aizkraukle': 'latvia', 'limba≈æi': 'latvia', 'gulbene': 'latvia',
             'al≈´ksne': 'latvia', 'balvi': 'latvia', 'ludza': 'latvia', 'preiƒºi': 'latvia',
             'smiltene': 'latvia', 'auce': 'latvia', 'pƒÅvilosta': 'latvia', 'stende': 'latvia',
             
             // Litvanya ≈üehirleri
             'vilnius': 'lithuania', 'kaunas': 'lithuania', 'klaipƒóda': 'lithuania', '≈°iauliai': 'lithuania',
             'panevƒó≈æys': 'lithuania', 'alytus': 'lithuania', 'marijampolƒó': 'lithuania', 'ma≈æeikiai': 'lithuania',
             'jonava': 'lithuania', 'utena': 'lithuania', 'kƒódainiai': 'lithuania', 'tel≈°iai': 'lithuania',
             'visaginas': 'lithuania', 'tauragƒó': 'lithuania', 'ukmergƒó': 'lithuania', 'plungƒó': 'lithuania',
             'kretinga': 'lithuania', '≈°ilutƒó': 'lithuania', 'radvili≈°kis': 'lithuania', 'garg≈ædai': 'lithuania',
             'druskininkai': 'lithuania', 'palanga': 'lithuania', 'roki≈°kis': 'lithuania', 'bir≈æai': 'lithuania',
             'elektrƒónai': 'lithuania', 'garliava': 'lithuania', 'kur≈°ƒónai': 'lithuania', 'vilkavi≈°kis': 'lithuania',
             '≈°akiai': 'lithuania', 'raseiniai': 'lithuania', 'anyk≈°ƒçiai': 'lithuania', 'prienai': 'lithuania'
           };
           
           return cityCountryMap[cityName.toLowerCase()] || null; // Bilinmeyen ≈üehirler i√ßin null d√∂nd√ºr
         }
         
         // ≈ûehir i√ßin √∂rnek turistik yerler olu≈ütur
         function generateCityPlaces(cityName, detectedCountry) {
           const countryFilter = document.getElementById('countryFilter');
           let selectedCountry = detectedCountry ? detectedCountry.toUpperCase() : (countryFilter ? countryFilter.value.toUpperCase() : 'GERMANY');
           
           // G√ºvenlik kontrol√º - selectedCountry'nin undefined olmamasƒ±nƒ± saƒüla
           if (!selectedCountry || selectedCountry === 'UNDEFINED') {
             selectedCountry = 'GERMANY';
           }
           
           // √ñzel ≈üehir verileri - d√ºnyaca √ºnl√º ≈üehirler i√ßin ger√ßek turistik yerler
           const specialCities = {
             'berlin': [
               { name: 'Brandenburg Kapƒ±sƒ±', category: 'Tarihi Yapƒ±', desc: 'Berlin\'in en √ºnl√º simgesi olan Brandenburg Kapƒ±sƒ±, Almanya\'nƒ±n birle≈ümesinin sembol√ºd√ºr. 1791 yƒ±lƒ±nda in≈üa edilen bu neoklasik yapƒ±, Berlin Duvarƒ±\'nƒ±n yƒ±kƒ±lmasƒ±ndan sonra √∂zg√ºrl√ºƒü√ºn simgesi haline gelmi≈ütir.' },
               { name: 'Berlin Duvarƒ±', category: 'Tarihi Yapƒ±', desc: 'Soƒüuk Sava≈ü d√∂neminin en √∂nemli sembollerinden biri olan Berlin Duvarƒ±\'nƒ±n kalƒ±ntƒ±larƒ±. East Side Gallery b√∂l√ºm√ºnde d√ºnyaca √ºnl√º sanat√ßƒ±larƒ±n duvar resimleri bulunmaktadƒ±r.' },
               { name: 'Reichstag Binasƒ±', category: 'H√ºk√ºmet Binasƒ±', desc: 'Alman Parlamentosu\'nun bulunduƒüu tarihi bina. Norman Foster tarafƒ±ndan tasarlanan cam kubbesi ile √ºnl√ºd√ºr ve √ºcretsiz ziyaret edilebilir.' },
               { name: 'Museum Island', category: 'M√ºze Kompleksi', desc: 'UNESCO D√ºnya Mirasƒ± listesinde yer alan m√ºze adasƒ±, be≈ü d√ºnyaca √ºnl√º m√ºzeyi barƒ±ndƒ±rƒ±r: Pergamon M√ºzesi, Bode M√ºzesi, Neues Museum, Alte Nationalgalerie ve Altes Museum.' },
               { name: 'Checkpoint Charlie', category: 'Tarihi Yer', desc: 'Soƒüuk Sava≈ü d√∂neminde Doƒüu ve Batƒ± Berlin arasƒ±ndaki en √ºnl√º sƒ±nƒ±r kapƒ±sƒ±. Bug√ºn m√ºze olarak hizmet vermekte ve d√∂nemin atmosferini ya≈üatmaktadƒ±r.' },
               { name: 'Tiergarten', category: 'Park', desc: 'Berlin\'in kalbinde yer alan 210 hektarlƒ±k b√ºy√ºk park. Y√ºr√ºy√º≈ü, bisiklet s√ºrme ve piknik i√ßin ideal. ƒ∞√ßinde Zafer Anƒ±tƒ± ve Bellevue Sarayƒ± bulunur.' },
               { name: 'Potsdamer Platz', category: '≈ûehir Merkezi', desc: 'Modern Berlin\'in kalbi olan bu meydan, g√∂kdelenler, alƒ±≈üveri≈ü merkezleri, sinema kompleksleri ve restoranlarla dolu canlƒ± bir b√∂lgedir.' },
               { name: 'Berlin Katedrali', category: 'Dini Yapƒ±', desc: 'Spree Nehri kƒ±yƒ±sƒ±nda yer alan g√∂rkemli Protestan katedrali. Barok mimarisi ve muhte≈üem kubbesi ile Berlin\'in en g√ºzel yapƒ±larƒ±ndan biridir.' },
               { name: 'Alexanderplatz', category: 'Meydan', desc: 'Berlin\'in en b√ºy√ºk meydanlarƒ±ndan biri. TV Kulesi, D√ºnya Saati ve √ße≈üitli alƒ±≈üveri≈ü merkezleri ile ≈üehrin √∂nemli bulu≈üma noktalarƒ±ndan biridir.' },
               { name: 'Charlottenburg Sarayƒ±', category: 'Saray', desc: 'Berlin\'in en b√ºy√ºk sarayƒ± ve Prusya kraliyet ailesinin eski ikametgahƒ±. Barok ve rokoko tarzƒ±nda dekore edilmi≈ü odalarƒ± ve muhte≈üem bah√ßeleri ile √ºnl√ºd√ºr.' },
               { name: 'Berlin TV Kulesi', category: 'Kule', desc: 'Alexanderplatz\'ta yer alan 368 metre y√ºksekliƒüindeki televizyon kulesi. Berlin\'in panoramik manzarasƒ±nƒ± sunan g√∂zlem terasƒ± ve d√∂ner restoran ile √ºnl√ºd√ºr.' },
               { name: 'Kreuzberg', category: 'Mahalle', desc: 'Berlin\'in alternatif k√ºlt√ºr merkezi ve K√º√ß√ºk ƒ∞stanbul olarak bilinen b√∂lge. T√ºrk n√ºfusunun yoƒüun olduƒüu bu b√∂lge, gece kul√ºpleri, sanat galerileri ve √ßok k√ºlt√ºrl√º atmosferi ile √ºnl√ºd√ºr.' },
               { name: 'Hackescher Markt', category: 'Alƒ±≈üveri≈ü B√∂lgesi', desc: 'Berlin\'in en canlƒ± alƒ±≈üveri≈ü ve eƒülence b√∂lgelerinden biri. Butik maƒüazalar, kafeler, restoranlar ve gece hayatƒ± ile pop√ºler bir destinasyon.' },
               { name: 'Gendarmenmarkt', category: 'Meydan', desc: 'Berlin\'in en g√ºzel meydanlarƒ±ndan biri. Fransƒ±z ve Alman katedralleri ile Konser Salonu\'nun √ßevrelediƒüi bu meydan, klasik mimarinin harikasƒ±.' },
               { name: 'Unter den Linden', category: 'Cadde', desc: 'Berlin\'in en √ºnl√º caddesi. Brandenburg Kapƒ±sƒ±\'ndan ba≈ülayarak ≈üehir merkezine uzanan bu tarihi cadde, √∂nemli binalarƒ± ve anƒ±tlarƒ± ile √ºnl√ºd√ºr.' },
               { name: 'Pergamon M√ºzesi', category: 'M√ºze', desc: 'Antik mimari eserlerin sergilendiƒüi d√ºnyaca √ºnl√º m√ºze. Pergamon Sunaƒüƒ±, ƒ∞shtar Kapƒ±sƒ± ve Roma Pazarƒ± Kapƒ±sƒ± gibi muhte≈üem eserler barƒ±ndƒ±rƒ±r.' },
               { name: 'Topography of Terror', category: 'M√ºze', desc: 'Nazi d√∂neminin korkun√ß tarihini anlatan a√ßƒ±k hava m√ºzesi. SS ve Gestapo merkezinin bulunduƒüu yerde kurulmu≈ü olan m√ºze, tarihin karanlƒ±k sayfalarƒ±nƒ± sergiler.' },
               { name: 'Spree Nehri', category: 'Doƒüal G√ºzellik', desc: 'Berlin\'i ge√ßen nehir. Tekne turlarƒ±, nehir kƒ±yƒ±sƒ±nda y√ºr√ºy√º≈ü ve √ße≈üitli su sporlarƒ± i√ßin ideal. ≈ûehrin farklƒ± a√ßƒ±lardan g√∂r√ºlmesini saƒülar.' },
               { name: 'Friedrichshain', category: 'Mahalle', desc: 'Gen√ß ve dinamik atmosferi ile √ºnl√º b√∂lge. East Side Gallery, RAW Gel√§nde ve √ßok sayƒ±da bar, kul√ºp ile Berlin\'in alternatif ya≈üamƒ±nƒ±n merkezi.' },
               { name: 'Prenzlauer Berg', category: 'Mahalle', desc: 'Bohemyen atmosferi ve restore edilmi≈ü tarihi binalarƒ± ile √ºnl√º b√∂lge. Kafeler, butik maƒüazalar ve sanat galerileri ile Berlin\'in en ≈üƒ±k semtlerinden biri.' },
               { name: 'Bernauer Strasse', category: 'Tarihi Yer', desc: 'Berlin Duvarƒ± Anƒ±tƒ±\'nƒ±n bulunduƒüu sokak. Duvarƒ±n kalƒ±ntƒ±larƒ± ve a√ßƒ±k hava sergisi ile Soƒüuk Sava≈ü d√∂neminin acƒ± hatƒ±ralarƒ±nƒ± ya≈üatƒ±r.' },
               { name: 'Badeschiff', category: 'Eƒülence', desc: 'Spree Nehri √ºzerinde in≈üa edilmi≈ü devasa bir y√ºzme havuzu. Sƒ±cak yaz g√ºnlerinde doyasƒ±ya eƒülenmek ve serinlemek i√ßin gidebileceƒüiniz en pop√ºler yerlerden biri.' }
             ],
             'paris': [
               { name: 'Eyfel Kulesi', category: 'Anƒ±t', desc: 'Paris\'in simgesi olan 324 metre y√ºksekliƒüindeki demir kule. 1889 yƒ±lƒ±nda in≈üa edilen bu muhte≈üem yapƒ±, ≈üehrin her yerinden g√∂r√ºlebilir ve gece ƒ±≈üƒ±klandƒ±rmasƒ± b√ºy√ºleyicidir.' },
               { name: 'Louvre M√ºzesi', category: 'M√ºze', desc: 'D√ºnyanƒ±n en b√ºy√ºk sanat m√ºzesi. Mona Lisa, Ven√ºs de Milo gibi √ºnl√º eserleri barƒ±ndƒ±rƒ±r. Eski kraliyet sarayƒ±nda kurulmu≈ü olan m√ºze, sanat severlerin cenneti.' },
               { name: 'Notre-Dame Katedrali', category: 'Dini Yapƒ±', desc: 'Gotik mimarinin en g√ºzel √∂rneklerinden biri olan katedral. Victor Hugo\'nun romanƒ±yla √ºnlenen bu yapƒ±, Paris\'in kalbinde Seine Nehri √ºzerindeki adada yer alƒ±r.' },
               { name: 'Champs-√âlys√©es', category: 'Cadde', desc: 'D√ºnyanƒ±n en √ºnl√º caddelerinden biri. L√ºks maƒüazalar, kafeler ve restoranlarla dolu olan bu cadde, Arc de Triomphe\'a kadar uzanƒ±r.' },
               { name: 'Sacr√©-C≈ìur Bazilikasƒ±', category: 'Dini Yapƒ±', desc: 'Montmartre tepesinde yer alan beyaz bazilika. Paris\'in panoramik manzarasƒ±nƒ± sunan bu yapƒ±, hem mimari g√ºzelliƒüi hem de konumuyla b√ºy√ºler.' },
               { name: 'Seine Nehri', category: 'Doƒüal G√ºzellik', desc: 'Paris\'i ikiye b√∂len tarihi nehir. Nehir kƒ±yƒ±sƒ±nda y√ºr√ºy√º≈ü yapmak, tekne turlarƒ± ve k√∂pr√ºlerin altƒ±ndan ge√ßmek unutulmaz deneyimler sunar.' },
               { name: 'Versay Sarayƒ±', category: 'Saray', desc: 'Fransƒ±z kraliyet ailesinin g√∂rkemli sarayƒ±. Altƒ±n kaplƒ± odalarƒ±, ayna salonu ve muhte≈üem bah√ßeleriyle Barok mimarinin en g√ºzel √∂rneƒüi.' },
               { name: 'Montmartre', category: 'Mahalle', desc: 'Sanat√ßƒ±lar mahallesi olarak √ºnl√º b√∂lge. Sokak sanat√ßƒ±larƒ±, kabareler ve bohemyen atmosferiyle Paris\'in en romantik k√∂≈üelerinden biri.' }
             ],
             'london': [
               { name: 'Big Ben', category: 'Saat Kulesi', desc: 'Londra\'nƒ±n simgesi olan √ºnl√º saat kulesi. Westminster Sarayƒ±\'nƒ±n bir par√ßasƒ± olan bu gotik yapƒ±, Thames Nehri kƒ±yƒ±sƒ±nda yer alƒ±r.' },
               { name: 'Buckingham Sarayƒ±', category: 'Saray', desc: 'ƒ∞ngiliz kraliyet ailesinin resmi ikametgahƒ±. N√∂bet deƒüi≈üimi t√∂reni ve g√∂rkemli mimarisiyle ziyaret√ßilerin ilgisini √ßeker.' },
               { name: 'Tower Bridge', category: 'K√∂pr√º', desc: 'Londra\'nƒ±n en √ºnl√º k√∂pr√ºs√º. Viktoryen d√∂neminin m√ºhendislik harikasƒ± olan bu a√ßƒ±lƒ±r k√∂pr√º, Thames Nehri √ºzerinde yer alƒ±r.' },
               { name: 'British Museum', category: 'M√ºze', desc: 'D√ºnyanƒ±n en eski ve en kapsamlƒ± m√ºzelerinden biri. Rosetta Ta≈üƒ±, Mƒ±sƒ±r mumyalarƒ± ve antik Yunan heykelleri gibi paha bi√ßilmez eserler barƒ±ndƒ±rƒ±r.' },
               { name: 'London Eye', category: 'D√∂nme Dolap', desc: '135 metre y√ºksekliƒüindeki dev d√∂nme dolap. Thames Nehri kƒ±yƒ±sƒ±nda yer alan bu modern yapƒ±, Londra\'nƒ±n 360 derece panoramik manzarasƒ±nƒ± sunar.' },
               { name: 'Hyde Park', category: 'Park', desc: 'Londra\'nƒ±n en b√ºy√ºk parklarƒ±ndan biri. Serpentine G√∂l√º, Speaker\'s Corner ve Diana Anƒ±sƒ± ile √ºnl√º olan park, ≈üehrin ye≈üil ciƒüeri.' },
               { name: 'Westminster Abbey', category: 'Dini Yapƒ±', desc: 'ƒ∞ngiliz krallarƒ±nƒ±n ta√ß giyme t√∂renleri ve d√ºƒü√ºnlerinin yapƒ±ldƒ±ƒüƒ± tarihi manastƒ±r. Gotik mimarinin muhte≈üem √∂rneƒüi.' },
               { name: 'Tate Modern', category: 'M√ºze', desc: 'Modern sanatƒ±n en √∂nemli eserlerini barƒ±ndƒ±ran m√ºze. Eski bir elektrik santralinde kurulmu≈ü olan m√ºze, Thames Nehri kƒ±yƒ±sƒ±nda yer alƒ±r.' }
             ],
             'rome': [
               { name: 'Kolezyum', category: 'Antik Yapƒ±', desc: 'Roma ƒ∞mparatorluƒüu\'nun en b√ºy√ºk amfitiyatrosu. Gladyat√∂r d√∂v√º≈ülerinin yapƒ±ldƒ±ƒüƒ± bu tarihi yapƒ±, antik d√ºnyanƒ±n m√ºhendislik harikasƒ±.' },
               { name: 'Vatikan M√ºzeleri', category: 'M√ºze', desc: 'D√ºnyanƒ±n en zengin sanat koleksiyonlarƒ±ndan birine sahip m√ºze kompleksi. Sistine ≈ûapeli ve Michelangelo\'nun freskleri burada yer alƒ±r.' },
               { name: 'Trevi √áe≈ümesi', category: '√áe≈üme', desc: 'Roma\'nƒ±n en √ºnl√º √ße≈ümesi. Barok tarzƒ±nda in≈üa edilen bu muhte≈üem √ße≈ümeye bozuk para atmak ≈üans getirdiƒüine inanƒ±lƒ±r.' },
               { name: 'Pantheon', category: 'Antik Yapƒ±', desc: 'Roma\'nƒ±n en iyi korunmu≈ü antik yapƒ±sƒ±. M.S. 126 yƒ±lƒ±nda in≈üa edilen bu tapƒ±nak, kubbeli mimarinin en erken √∂rneklerinden biri.' },
               { name: 'Forum Romanum', category: 'Antik Alan', desc: 'Antik Roma\'nƒ±n siyasi, ticari ve sosyal merkezi. Tapƒ±naklar, bazilika ve kemerlerin kalƒ±ntƒ±larƒ± Roma ƒ∞mparatorluƒüu\'nun ihti≈üamƒ±nƒ± g√∂zler √∂n√ºne serer.' },
               { name: 'ƒ∞spanyol Merdivenleri', category: 'Meydan', desc: '135 basamaklƒ± √ºnl√º merdivenler. Trinit√† dei Monti kilisesine √ßƒ±kan bu merdivenler, Roma\'nƒ±n en pop√ºler bulu≈üma noktalarƒ±ndan biri.' },
               { name: 'Castel Sant\'Angelo', category: 'Kale', desc: 'Tiber Nehri kƒ±yƒ±sƒ±nda yer alan silindirik kale. Ba≈ülangƒ±√ßta Hadrian\'ƒ±n mezarƒ± olarak in≈üa edilen yapƒ±, daha sonra papa kalesi olarak kullanƒ±ldƒ±.' },
               { name: 'Villa Borghese', category: 'Park', desc: 'Roma\'nƒ±n en b√ºy√ºk parkƒ±. ƒ∞√ßinde Borghese Galerisi, hayvanat bah√ßesi ve g√∂l bulunan bu park, ≈üehrin ye≈üil oazƒ±.' }
             ],
             'tokyo': [
               { name: 'Tokyo Skytree', category: 'Kule', desc: '634 metre y√ºksekliƒüindeki televizyon kulesi. Tokyo\'nun modern simgesi olan bu yapƒ±, ≈üehrin panoramik manzarasƒ±nƒ± sunar.' },
               { name: 'Senso-ji Tapƒ±naƒüƒ±', category: 'Tapƒ±nak', desc: 'Tokyo\'nun en eski Budist tapƒ±naƒüƒ±. Asakusa b√∂lgesinde yer alan bu tapƒ±nak, geleneksel Japon mimarisinin g√ºzel bir √∂rneƒüi.' },
               { name: 'Shibuya Ge√ßidi', category: 'Kav≈üak', desc: 'D√ºnyanƒ±n en kalabalƒ±k yaya ge√ßidi. Her g√ºn milyonlarca insanƒ±n ge√ßtiƒüi bu kav≈üak, modern Tokyo\'nun sembol√º.' },
               { name: 'Meiji Tapƒ±naƒüƒ±', category: 'Tapƒ±nak', desc: 'ƒ∞mparator Meiji ve ƒ∞mparatori√ße Shoken\'in anƒ±sƒ±na in≈üa edilen Shinto tapƒ±naƒüƒ±. ≈ûehrin ortasƒ±nda yer alan huzurlu bir oaz.' },
               { name: 'Tsukiji Balƒ±k Pazarƒ±', category: 'Pazar', desc: 'D√ºnyanƒ±n en b√ºy√ºk balƒ±k pazarƒ±. Taze sushi ve sashimi i√ßin en iyi adres olan bu pazar, Japon mutfak k√ºlt√ºr√ºn√ºn kalbi.' },
               { name: 'ƒ∞mparatorluk Sarayƒ±', category: 'Saray', desc: 'Japon ƒ∞mparatoru\'nun ikametgahƒ±. Geleneksel Japon bah√ßeleri ve tarihi yapƒ±larƒ±yla √ßevrili olan saray, Tokyo\'nun merkezinde yer alƒ±r.' },
               { name: 'Harajuku', category: 'Mahalle', desc: 'Gen√ßlik k√ºlt√ºr√º ve modanƒ±n merkezi. Renkli kost√ºmler, manga k√ºlt√ºr√º ve alternatif moda trendlerinin bulu≈üma noktasƒ±.' },
               { name: 'Ueno Parkƒ±', category: 'Park', desc: 'Tokyo\'nun k√ºlt√ºr merkezi. ƒ∞√ßinde m√ºzeler, hayvanat bah√ßesi ve bahar aylarƒ±nda kiraz √ßi√ßekleri bulunan bu park, ≈üehrin k√ºlt√ºrel kalbi.' }
             ],
             'istanbul': [
               { name: 'Ayasofya', category: 'Tarihi Yapƒ±', desc: 'Bizans ve Osmanlƒ± mimarisinin muhte≈üem sentezi. 1500 yƒ±llƒ±k bu yapƒ±, ƒ∞stanbul\'un en √∂nemli simgelerinden biri.' },
               { name: 'Sultanahmet Camii', category: 'Cami', desc: 'Altƒ± minaresi ile √ºnl√º Mavi Cami. ƒ∞√ßindeki mavi √ßiniler ve g√∂rkemli mimarisi ile Osmanlƒ± sanatƒ±nƒ±n en g√ºzel √∂rneƒüi.' },
               { name: 'Topkapƒ± Sarayƒ±', category: 'Saray', desc: 'Osmanlƒ± padi≈üahlarƒ±nƒ±n 400 yƒ±l boyunca ya≈üadƒ±ƒüƒ± saray. Hazine dairesi, harem ve muhte≈üem Boƒüaz manzarasƒ± ile √ºnl√º.' },
               { name: 'Kapalƒ±√ßar≈üƒ±', category: '√áar≈üƒ±', desc: 'D√ºnyanƒ±n en eski kapalƒ± √ßar≈üƒ±larƒ±ndan biri. 4000 d√ºkkanƒ± ile halƒ±, m√ºcevher, baharat ve hediyelik e≈üya alƒ±≈üveri≈üinin merkezi.' },
               { name: 'Galata Kulesi', category: 'Kule', desc: 'Cenevizliler tarafƒ±ndan in≈üa edilen tarihi kule. ƒ∞stanbul\'un 360 derece panoramik manzarasƒ±nƒ± sunan en g√ºzel seyir noktasƒ±.' },
               { name: 'Boƒüazi√ßi', category: 'Doƒüal G√ºzellik', desc: 'Avrupa ve Asya\'yƒ± birle≈ütiren boƒüaz. Tekne turlarƒ±, sahil y√ºr√ºy√º≈üleri ve k√∂pr√º manzaralarƒ± ile ƒ∞stanbul\'un en g√ºzel yanƒ±.' },
               { name: 'Basilika Sarnƒ±cƒ±', category: 'Tarihi Yapƒ±', desc: 'Bizans d√∂neminden kalma yeraltƒ± sarnƒ±cƒ±. 336 s√ºtunlu bu gizemli yapƒ±, ƒ∞stanbul\'un yeraltƒ± hazinelerinden biri.' },
               { name: 'Dolmabah√ße Sarayƒ±', category: 'Saray', desc: 'Osmanlƒ±\'nƒ±n son d√∂nem sarayƒ±. Barok ve neoklasik mimarinin harmanlandƒ±ƒüƒ± bu g√∂rkemli saray, Boƒüaz kƒ±yƒ±sƒ±nda yer alƒ±r.' }
             ],
             'beijing': [
               { name: 'Yasak ≈ûehir', category: 'Saray', desc: 'Ming ve Qing hanedanlarƒ±nƒ±n 500 yƒ±l boyunca ya≈üadƒ±ƒüƒ± g√∂rkemli saray kompleksi. 9999 odasƒ± ile d√ºnyanƒ±n en b√ºy√ºk saray kompleksi.' },
               { name: '√áin Seddi', category: 'Tarihi Yapƒ±', desc: 'D√ºnyanƒ±n en uzun yapƒ±sƒ± olan √áin Seddi\'nin Beijing yakƒ±nlarƒ±ndaki b√∂l√ºm√º. 2000 yƒ±llƒ±k bu muhte≈üem savunma yapƒ±sƒ±, uzaydan g√∂r√ºlebilen tek yapƒ±.' },
               { name: 'Tiananmen Meydanƒ±', category: 'Meydan', desc: 'D√ºnyanƒ±n en b√ºy√ºk ≈üehir meydanƒ±. √áin\'in siyasi merkezi olan bu meydan, √∂nemli devlet t√∂renlerinin yapƒ±ldƒ±ƒüƒ± yer.' },
               { name: 'Cennet Tapƒ±naƒüƒ±', category: 'Tapƒ±nak', desc: 'Ming ve Qing imparatorlarƒ±nƒ±n cennet i√ßin dua ettiƒüi dairesel tapƒ±nak. Geleneksel √áin mimarisinin en g√ºzel √∂rneƒüi.' },
               { name: 'Yaz Sarayƒ±', category: 'Saray', desc: 'ƒ∞mparatorluk ailesinin yaz ikametgahƒ±. Kunming G√∂l√º ve muhte≈üem bah√ßeleriyle √áin bah√ße sanatƒ±nƒ±n en g√ºzel √∂rneƒüi.' },
               { name: 'Lama Tapƒ±naƒüƒ±', category: 'Tapƒ±nak', desc: 'Beijing\'in en √∂nemli Budist tapƒ±naƒüƒ±. Tibet Budizmi\'nin merkezi olan bu tapƒ±nak, renkli mimarisi ve huzurlu atmosferiyle √ºnl√º.' },
               { name: 'Hutong Sokaklarƒ±', category: 'Tarihi Mahalle', desc: 'Geleneksel Beijing ya≈üamƒ±nƒ±n s√ºrd√ºƒü√º dar sokaklar. Siheyuan evleri ve yerel ya≈üam k√ºlt√ºr√ºn√º deneyimleyebileceƒüiniz otantik b√∂lge.' },
               { name: 'Beihai Parkƒ±', category: 'Park', desc: 'Beijing\'in en eski imperial parkƒ±. Beyaz Pagoda ve g√∂l manzarasƒ± ile ≈üehrin en huzurlu k√∂≈üelerinden biri.' }
             ],
             'shanghai': [
               { name: 'Bund', category: 'Sahil', desc: 'Shanghai\'ƒ±n simgesi olan sahil ≈üeridi. Art Deco binalarƒ± ve modern g√∂kdelenler arasƒ±ndaki kontrast, ≈üehrin ge√ßmi≈üi ve geleceƒüini yansƒ±tƒ±r.' },
               { name: 'Oriental Pearl Tower', category: 'Kule', desc: '468 metre y√ºksekliƒüindeki futuristik televizyon kulesi. Shanghai\'ƒ±n modern simgesi olan bu kule, ≈üehrin panoramik manzarasƒ±nƒ± sunar.' },
               { name: 'Yu Garden', category: 'Bah√ße', desc: 'Ming hanedanƒ± d√∂neminden kalma geleneksel √áin bah√ßesi. Pavyonlar, g√∂letler ve kayalar ile √áin bah√ße sanatƒ±nƒ±n m√ºkemmel √∂rneƒüi.' },
               { name: 'Nanjing Road', category: 'Alƒ±≈üveri≈ü Caddesi', desc: '√áin\'in en √ºnl√º alƒ±≈üveri≈ü caddesi. Neon ƒ±≈üƒ±klarƒ±, maƒüazalar ve restoranlarla dolu olan bu cadde, Shanghai\'ƒ±n ticari kalbi.' },
               { name: 'Shanghai Tower', category: 'G√∂kdelen', desc: '632 metre y√ºksekliƒüinde √áin\'in en y√ºksek binasƒ±. Spiral tasarƒ±mƒ± ve s√ºrd√ºr√ºlebilir mimarisiyle modern m√ºhendisliƒüin harikasƒ±.' },
               { name: 'Tianzifang', category: 'Sanat Mahallesi', desc: 'Geleneksel shikumen evlerinin sanat galerilerine d√∂n√º≈üt√ºr√ºld√ºƒü√º bohemyen mahalle. Kafeler, butik maƒüazalar ve sanat at√∂lyeleri.' },
               { name: 'Huangpu Nehri', category: 'Nehir', desc: 'Shanghai\'ƒ± ikiye b√∂len nehir. Gece tekne turlarƒ± ile ≈üehrin ƒ±≈üƒ±klƒ± siluetini izlemek unutulmaz bir deneyim.' },
               { name: 'Jing\'an Temple', category: 'Tapƒ±nak', desc: 'Shanghai\'ƒ±n merkezindeki altƒ±n renkli Budist tapƒ±nak. Modern g√∂kdelenler arasƒ±nda yer alan bu tapƒ±nak, ge√ßmi≈ü ve gelecek arasƒ±nda k√∂pr√º kurar.' }
             ]
           };
           
           // √ñzel ≈üehir verisi varsa onu kullan
           const cityKey = cityName.toLowerCase();
           if (specialCities[cityKey]) {
             return specialCities[cityKey].map(place => ({
               name: place.name,
               city: cityName || 'Unknown City',
               country: selectedCountry || 'GERMANY',
               category: place.category,
               description: place.desc,
               visited: false,
               createdAt: new Date()
             }));
           }
           
           const commonAttractions = [
             { 
               suffix: 'Merkez', 
               category: '≈ûehir Merkezi', 
               desc: `${cityName} ≈üehrinin kalbi ve ana meydanƒ±. Tarihi binalar, cafeler ve restoranlarla √ßevrili olan bu b√∂lge, ≈üehrin sosyal ve k√ºlt√ºrel ya≈üamƒ±nƒ±n merkezi konumundadƒ±r. Y√ºr√ºy√º≈ü yapmak ve yerel atmosferi hissetmek i√ßin ideal bir yerdir.` 
             },
             { 
               suffix: 'M√ºzesi', 
               category: 'M√ºze', 
               desc: `${cityName} ≈üehrinin yerel tarih ve k√ºlt√ºr m√ºzesi. ≈ûehrin ge√ßmi≈üinden g√ºn√ºm√ºze kadar uzanan zengin koleksiyonu ile ziyaret√ßilere b√∂lgenin tarihini, sanatƒ±nƒ± ve k√ºlt√ºr√ºn√º tanƒ±ma fƒ±rsatƒ± sunar. Interaktif sergiler ve rehberli turlarla unutulmaz bir deneyim ya≈üayabilirsiniz.` 
             },
             { 
               suffix: 'Katedrali', 
               category: 'Dini Yapƒ±', 
               desc: `${cityName} ≈üehrinin g√∂rkemli katedrali. Gotik mimarinin en g√ºzel √∂rneklerinden biri olan bu yapƒ±, y√ºzyƒ±llardƒ±r ≈üehrin simgesi olmu≈ütur. ƒ∞√ßerisindeki vitray camlar, heykeller ve tarihi eserler g√∂r√ºlmeye deƒüerdir. Sessiz bir atmosferde ibadet edebilir veya mimariyi inceleyebilirsiniz.` 
             },
             { 
               suffix: 'Kalesi', 
               category: 'Tarihi Yapƒ±', 
               desc: `${cityName} ≈üehrinin tarihi kalesi ve surlarƒ±. Orta√ßaƒü d√∂neminden kalma bu muhte≈üem yapƒ±, ≈üehrin savunma tarihini g√∂zler √∂n√ºne serer. Kale duvarlarƒ±ndan ≈üehrin panoramik manzarasƒ±nƒ± izleyebilir, tarihi odalarƒ± gezebilir ve ge√ßmi≈üe yolculuk yapabilirsiniz.` 
             },
             { 
               suffix: 'Parkƒ±', 
               category: 'Park', 
               desc: `${cityName} ≈üehrinin en b√ºy√ºk ve en g√ºzel parkƒ±. Geni≈ü ye≈üil alanlarƒ±, y√ºr√ºy√º≈ü yollarƒ±, g√∂letleri ve √ßocuk oyun alanlarƒ± ile ailecek vakit ge√ßirmek i√ßin m√ºkemmel bir yerdir. Piknik yapabilir, spor aktivitelerine katƒ±labilir veya doƒüayla i√ß i√ße dinlenebilirsiniz.` 
             },
             { 
               suffix: '√áar≈üƒ±sƒ±', 
               category: 'Alƒ±≈üveri≈ü', 
               desc: `${cityName} ≈üehrinin geleneksel √ßar≈üƒ±sƒ± ve pazarƒ±. Yerel √ºr√ºnler, el sanatlarƒ±, taze gƒ±dalar ve hediyelik e≈üyalar bulabileceƒüiniz renkli bir alƒ±≈üveri≈ü deneyimi sunar. Pazarlƒ±k yapabilir, yerel lezzetleri tadabilir ve ≈üehrin ticari ya≈üamƒ±nƒ± yakƒ±ndan g√∂zlemleyebilirsiniz.` 
             },
             { 
               suffix: 'K√∂pr√ºs√º', 
               category: 'Mimari', 
               desc: `${cityName} ≈üehrinin tarihi k√∂pr√ºs√º. Mimari a√ßƒ±dan b√ºy√ºleyici olan bu k√∂pr√º, ≈üehrin iki yakasƒ±nƒ± birle≈ütiren √∂nemli bir ula≈üƒ±m noktasƒ±dƒ±r. K√∂pr√º √ºzerinden nehir manzarasƒ±nƒ± izleyebilir, fotoƒüraf √ßekebilir ve ≈üehrin farklƒ± a√ßƒ±lardan g√∂r√ºn√ºm√ºn√º ke≈üfedebilirsiniz.` 
             },
             { 
               suffix: 'Meydanƒ±', 
               category: 'Meydan', 
               desc: `${cityName} ≈üehrinin ana meydanƒ± ve bulu≈üma noktasƒ±. √áevresindeki tarihi binalar, heykeller ve √ße≈ümelerle ≈üehrin en canlƒ± b√∂lgelerinden biridir. Etkinlikler, festivaller ve konserler d√ºzenlenen bu meydan, yerel halkla tanƒ±≈ümak ve ≈üehrin nabzƒ±nƒ± hissetmek i√ßin ideal bir yerdir.` 
             },
             { 
               suffix: 'Sarayƒ±', 
               category: 'Saray', 
               desc: `${cityName} ≈üehrinin muhte≈üem sarayƒ±. Kraliyet ailelerinin ya≈üadƒ±ƒüƒ± bu g√∂rkemli yapƒ±, l√ºks mobilyalarƒ±, deƒüerli sanat eserleri ve b√ºy√ºleyici bah√ßeleriyle ziyaret√ßilerini b√ºy√ºler. Rehberli turlarla sarayƒ±n tarihini √∂ƒürenebilir ve aristokrat ya≈üamƒ±nƒ± ke≈üfedebilirsiniz.` 
             },
             { 
               suffix: 'Bah√ßesi', 
               category: 'Bah√ße', 
               desc: `${cityName} ≈üehrinin botanik bah√ßesi. Binlerce farklƒ± bitki t√ºr√º, egzotik √ßi√ßekler ve tematik b√∂l√ºmlerle doƒüa severlerin cenneti olan bu bah√ße, huzurlu bir atmosfer sunar. Sera b√∂l√ºmlerini gezebilir, nadir bitkileri inceleyebilir ve doƒüanƒ±n g√ºzelliƒüinde kaybolabilirsiniz.` 
             }
           ];
           
           return commonAttractions.map(attraction => ({
             name: `${cityName || 'Unknown City'} ${attraction.suffix}`,
             city: cityName || 'Unknown City',
             country: (selectedCountry || 'GERMANY').toUpperCase(),
             category: attraction.category,
             description: attraction.desc,
             visited: false,
             createdAt: new Date()
           }));
         }

         // Google Maps rota olu≈üturma fonksiyonu
           function createGoogleMapsRoute() {
            const checkboxes = document.querySelectorAll('.route-checkbox:checked');
            if (checkboxes.length < 2) {
              alert('Rota olu≈üturmak i√ßin en az 2 yer se√ßmelisiniz!');
              return;
            }
            
            const selectedPlaces = [];
            checkboxes.forEach(checkbox => {
              const name = checkbox.getAttribute('data-name');
              const city = checkbox.getAttribute('data-city');
              const country = checkbox.getAttribute('data-country');
              selectedPlaces.push(`${name}, ${city}, ${country}`);
            });
            
            if (selectedPlaces.length === 0) {
              alert('Se√ßili yer bulunamadƒ±!');
              return;
            }
            
            // Google Maps Directions URL olu≈ütur
            const origin = encodeURIComponent(selectedPlaces[0]);
            const destination = encodeURIComponent(selectedPlaces[selectedPlaces.length - 1]);
            let waypoints = '';
            
            if (selectedPlaces.length > 2) {
              const middlePoints = selectedPlaces.slice(1, -1);
              waypoints = '&waypoints=' + middlePoints.map(place => encodeURIComponent(place)).join('|');
            }
            
            const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}${waypoints}&travelmode=driving`;
            
            // Yeni sekmede a√ß
            window.open(googleMapsUrl, '_blank');
          }

        // Filtre deƒüi≈üince tabloyu g√ºncelle
        document.addEventListener('DOMContentLoaded', () => {
          const countryFilter = document.getElementById('countryFilter');
          const visitedFilter = document.getElementById('visitedFilter');
          if (countryFilter && visitedFilter) {
            countryFilter.addEventListener('change', () => {
              const user = auth.currentUser;
              if (user) loadPlacesTable(user);
              if (window.enhancedBackgroundManager) {
                window.enhancedBackgroundManager.updateBackgroundForCountry(countryFilter.value);
              }
            });
            visitedFilter.addEventListener('change', () => {
              const user = auth.currentUser;
              if (user) loadPlacesTable(user);
            });
          }
        });
        
        // Sayfa tamamen y√ºklendikten sonra arka planƒ± g√ºncelle
        window.addEventListener('load', () => {
          const countryFilter = document.getElementById('countryFilter');
          if (countryFilter && window.enhancedBackgroundManager) {
            console.log('Sayfa y√ºklendi, arka plan g√ºncelleniyor:', countryFilter.value);
            window.enhancedBackgroundManager.updateBackgroundForCountry(countryFilter.value);
          }
        });

        // T√ºm pop√ºler √ºlke JSON dosyalarƒ±nƒ± otomatik bul ve oku
        async function getAllPopularCountryFiles() {
          // public/json/popular-*.json dosyalarƒ±nƒ± bulmak i√ßin bir endpoint veya sabit liste gerekir
          // Burada sabit bir listeyle ilerliyoruz (daha sonra dinamik yapƒ±labilir)
          const countryFiles = [
            'popular-germany.json', 'popular-france.json', 'popular-italy.json', 'popular-spain.json', 'popular-netherlands.json',
            'popular-switzerland.json', 'popular-belgium.json', 'popular-austria.json', 'popular-poland.json', 'popular-czech-republic.json',
            'popular-hungary.json', 'popular-romania.json', 'popular-greece.json', 'popular-portugal.json', 'popular-croatia.json',
            'popular-slovenia.json', 'popular-bulgaria.json', 'popular-slovakia.json', 'popular-estonia.json', 'popular-latvia.json',
            'popular-lithuania.json', 'popular-south-korea.json', 'popular-japan.json', 'popular-turkey.json', 'popular-uk.json', 'popular-ireland.json'
          ];
          const base = '/json/';
          const all = [];
          for (const file of countryFiles) {
            try {
              const resp = await fetch(base + file);
              if (resp.ok) {
                const arr = await resp.json();
                all.push({ file, arr });
              }
            } catch {}
          }
          return all;
        }

        // T√ºm √ºlkelerin kodlarƒ±nƒ± ve isimlerini d√∂nd√ºr
        async function getAllPopularCountryCodes() {
          const all = await getAllPopularCountryFiles();
          const codes = new Set();
          all.forEach(({ arr }) => {
            arr.forEach(p => {
              if (p.country_tr) codes.add(p.country_tr.toUpperCase());
              if (p.country_en) codes.add(p.country_en.toUpperCase());
            });
          });
          return Array.from(codes).sort();
        }

        // T√ºm pop√ºler yerleri tek dizi olarak d√∂nd√ºr
        async function getAllPopularPlaces() {
          const all = await getAllPopularCountryFiles();
          return all.flatMap(({ arr }) => arr);
        }

        // √úlke dropdown'ƒ±nƒ± t√ºm pop√ºler √ºlkelerle g√ºncelle
        async function updateCountryDropdown(user, allCountryCodes) {
          const countryFilter = document.getElementById('countryFilter');
          if (!countryFilter) return;
          countryFilter.innerHTML = '';
          allCountryCodes.forEach(c => {
            const opt = document.createElement('option');
            opt.value = c;
            opt.textContent = c;
            countryFilter.appendChild(opt);
          });
          // Kullanƒ±cƒ±nƒ±n mevcut √ºlkesini koru
          if (!countryFilter.value) countryFilter.value = 'ALMANYA';
        }

        function getEnglishCountryKeySafe(country) {
          if (window.enhancedBackgroundManager && typeof window.enhancedBackgroundManager.getEnglishCountryKey === 'function') {
            return window.enhancedBackgroundManager.getEnglishCountryKey(country);
          }
          // Local fallback (kƒ±sa versiyon)
          const map = {
            't√ºrkiye': 'turkey', 'almanya': 'germany', 'fransa': 'france', 'italya': 'italy', 'ispanya': 'spain',
            'yunanistan': 'greece', 'hollanda': 'netherlands', 'bel√ßika': 'belgium', 'avusturya': 'austria',
            'isvi√ßre': 'switzerland', 'portekiz': 'portugal', '√ßek cumhuriyeti': 'czech republic', 'polonya': 'poland',
            'romanya': 'romania', 'bulgaristan': 'bulgaria', 'letonya': 'latvia', 'litvanya': 'lithuania',
            'estonya': 'estonia', 'macaristan': 'hungary', 'slovakya': 'slovakia', 'slovenya': 'slovenia',
            'hirvatistan': 'croatia', 'sƒ±rbistan': 'serbia', 'ukrayna': 'ukraine', 'norve√ß': 'norway',
            'isve√ß': 'sweden', 'finlandiya': 'finland', 'g√ºney kore': 'south korea', 'japonya': 'japan',
            '√ßin': 'china', 'abd': 'usa', 'amerika': 'usa', 'birle≈üik krallƒ±k': 'uk'
          };
          const norm = country.toLowerCase().replace(/√ß/g,'c').replace(/ƒü/g,'g').replace(/ƒ±/g,'i').replace(/√∂/g,'o').replace(/≈ü/g,'s').replace(/√º/g, 'u');
          return map[norm] || norm;
        }

        // Geli≈ümi≈ü T√ºrk√ße b√ºy√ºk harf d√∂n√º≈ü√ºm√º fonksiyonu
        function toTurkishUpper(str) {
          return str
            .replace(/i/g, 'ƒ∞')
            .replace(/ƒ±/g, 'I')
            .replace(/I/g, 'ƒ∞')
            .replace(/≈ü/g, '≈û')
            .replace(/ƒü/g, 'ƒû')
            .replace(/√º/g, '√ú')
            .replace(/√∂/g, '√ñ')
            .replace(/√ß/g, '√á')
            .toUpperCase();
        }

        // --- √úlke combobox'ƒ±nƒ± T√ºrk√ße isme g√∂re alfabetik sƒ±rala ---
        async function updateCountryDropdownWithPopularOnly() {
          const countryFilter = document.getElementById('countryFilter');
          if (!countryFilter) return;
          // 1. Pop√ºler √ºlkeleri oku
          const allPopular = await getAllPopularCountryCodes(); // normalize edilmi≈ü ƒ∞ngilizce anahtarlar
          // 2. Tekrarlarƒ± engelle
          const allCountries = Array.from(new Set(allPopular));
          // 3. T√ºrk√ße isme g√∂re sƒ±rala
          allCountries.sort((a, b) => {
            const trA = toTurkishUpper(countryNames[a]?.[currentLang] || a);
            const trB = toTurkishUpper(countryNames[b]?.[currentLang] || b);
            return trA.localeCompare(trB, 'tr');
          });
          // 4. Dropdown'u doldur
          countryFilter.innerHTML = '';
          allCountries.forEach(englishKey => {
            const opt = document.createElement('option');
            opt.value = englishKey;
            const trName = countryNames[englishKey]?.[currentLang] || englishKey;
            opt.textContent = toTurkishUpper(trName);
            countryFilter.appendChild(opt);
          });
          // Varsayƒ±lan √ºlke: ALMANYA
          if (!countryFilter.value && allCountries.includes('germany')) {
            countryFilter.value = 'germany';
            // √úlke se√ßildiƒüinde arka planƒ± g√ºncelle
            if (window.enhancedBackgroundManager) {
              console.log('Varsayƒ±lan √ºlke se√ßildi, arka plan g√ºncelleniyor:', countryFilter.value);
              setTimeout(() => {
                window.enhancedBackgroundManager.updateBackgroundForCountry(countryFilter.value);
              }, 200);
            }
          }
        }

        // --- Sayfa ilk a√ßƒ±ldƒ±ƒüƒ±nda ve kullanƒ±cƒ± deƒüi≈ütiƒüinde √ºlke dropdown'unu g√ºncelle ---
        document.addEventListener('DOMContentLoaded', () => {
          updateCountryDropdownWithPopularOnly();
        });
    </script>
    <script src="/js/enhanced-background-manager.js"></script>
</body>

</html>